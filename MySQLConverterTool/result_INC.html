<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0067)http://cbdev-localhost/MySQLConverterTool/GUI/convert_directory.php -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>MySQL ext/mysql Converter Tool</title>
    <link rel="stylesheet" type="text/css" href="./result_INC_files/main.css"> 
    <script language="JavaScript">
        function toggle_view(id) {
            var el;            
            if (!(el = document.getElementById(id)))
                return;
            
            if (el.style.display == 'inline') {                               
                el.style.display = 'none';                     
            } else {
                el.style.display = 'inline';                
            }
            
        }
    </script>       
</head>
<body>
<div class="topnav">
<table cellpadding="0" cellspacing="0">
<tbody><tr>
    <td width="100%">
        <a class="topnavlink" name="top" href="http://cbdev-localhost/MySQLConverterTool/GUI/index.php">Home</a>
        &nbsp;--&gt;&nbsp;<a class="topnavlink" href="./result_INC_files/result_INC.html">Convert a directory</a>        
    </td>
    <td><a class="topnavlink" href="http://cbdev-localhost/MySQLConverterTool/GUI/help.php">Help</a></td>
</tr>
</tbody></table>    
</div>
<div class="topgreetings">
    <h1>Convert all files from a directory</h1>
</div>
<div class="main">
<div class="maintextbox">
    <h2>Results of the conversion</h2>    
    <table class="conversiondetailstable" style="margin-left:0em">    
    <tbody><tr>
        <th style="padding:0.5em" nowrap="nowrap">Number of Files</th>        
        <th style="padding:0.5em">OK</th>
        <th style="padding:0.5em">Warnings</th>
        <th style="padding:0.5em">Errors</th>
        <th style="padding:0.5em" nowrap="nowrap">Number of mysql_*-functions&nbsp;found</th>
        <th style="padding:0.5em" nowrap="nowrap">Number of mysql_*-functions&nbsp;converted</th>        
        <th style="padding:0.5em">Code&nbsp;(kB)</th>
    </tr>
    <tr>
        <td align="right" style="padding:0.5em">6</td>
        <td align="right" style="padding:0.5em">6</td>
        <td align="right" style="padding:0.5em">0</td>
        <td align="right" style="padding:0.5em">0</td>
        <td align="right" style="padding:0.5em">0</td>
        <td align="right" style="padding:0.5em">0</td>
        <td align="right" style="padding:0.5em">60</td>
    </tr>
    </tbody></table>
</div><div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;dffa280ab3a99b59bcd57d21fbe6652f_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/TPV.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="dffa280ab3a99b59bcd57d21fbe6652f_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">476</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br></span><span style="color: #FF8000">//$PASARELA="TPV/conexion_sis.php";
<br></span><span style="color: #0000BB">$PASARELA</span><span style="color: #007700">=</span><span style="color: #DD0000">"../../can_borrell_inc/conexion_sis.php"</span><span style="color: #007700">;&nbsp;
<br>
<br></span><span style="color: #0000BB">$url_tpvv</span><span style="color: #007700">=</span><span style="color: #DD0000">'https://sis.sermepa.es/sis/realizarPago'</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$clave</span><span style="color: #007700">=</span><span style="color: #DD0000">'restaueu8r398darbone'</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$code</span><span style="color: #007700">=</span><span style="color: #DD0000">'11241387'</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$terminal</span><span style="color: #007700">=</span><span style="color: #DD0000">'001'</span><span style="color: #007700">;&nbsp;&nbsp;
<br></span><span style="color: #0000BB">$transactionType</span><span style="color: #007700">=</span><span style="color: #DD0000">'0'</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$currency</span><span style="color: #007700">=</span><span style="color: #DD0000">'978'</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>
<br></span><span style="color: #FF8000">//ENTORNO&nbsp;PRUEBAS
<br>//$url_tpvv='https://sis-t.sermepa.es:25443/sis/realizarPago';
<br></span><span style="color: #0000BB">$url_tpvv</span><span style="color: #007700">=</span><span style="color: #DD0000">'https://sis-t.redsys.es:25443/sis/realizarPago'</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$clave</span><span style="color: #007700">=</span><span style="color: #DD0000">'qwertyasdf0123456789'</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$code</span><span style="color: #007700">=</span><span style="color: #DD0000">'11241387'</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
<div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;686298bddd9afcdc0fe84551efbf9296_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/valors.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="686298bddd9afcdc0fe84551efbf9296_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">17296</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'MAIL_RESTAURANT'</span><span style="color: #007700">))&nbsp;</span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'MAIL_RESTAURANT'</span><span style="color: #007700">,</span><span style="color: #DD0000">'restaurant@can-borrell.com'</span><span style="color: #007700">);
<br>
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº1"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº1&nbsp;Celebració"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº2"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº2&nbsp;Celebració"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº3"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Calçotada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Comunió"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Casament"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">8</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Carta"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº4"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'jr_comu'</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;comunió&nbsp;jr."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'juinior'</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;júnior"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'jr_casa'</span><span style="color: #007700">][</span><span style="color: #DD0000">"cat"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;casament&nbsp;jr."</span><span style="color: #007700">;
<br>
<br>
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº1"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº1&nbsp;Celebración"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº2"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº2&nbsp;Celebración"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº3"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Calçotada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Comunión"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;Bodas"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">8</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Carta"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;nº4"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'jr_comu'</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;comunión&nbsp;jr."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'juinior'</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;júnior"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #DD0000">'jr_casa'</span><span style="color: #007700">][</span><span style="color: #DD0000">"esp"</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Menú&nbsp;boda&nbsp;jr."</span><span style="color: #007700">;
<br>&nbsp;
<br>
<br>&nbsp;
<br></span><span style="color: #FF8000">/*
<br>//&nbsp;OBSOLETO:&nbsp;PREUS&nbsp;CHEFF&nbsp;
<br>$tmenu[0]="menu1_1";
<br>$tmenu[1]="menu1c_1";
<br>$tmenu[2]="menu2_1";
<br>$tmenu[3]="menu2c_1";
<br>$tmenu[4]="menu3_1";
<br>$tmenu[9]="menu4_1";
<br>$tmenu[5]="menuc_1";
<br>$tmenu[6]="menucomu_1";
<br>$tmenu[7]="menucasam_1";
<br>$tmenu["infantil"]="menu1_3";
<br>$tmenu["inf_comu"]="menucomu_2";
<br>$tmenu["inf_casa"]="menucasam_2";
<br>$tmenu["junior"]="menu1_4";
<br>$tmenu["jr_comu"]="menucomu_3";
<br>$tmenu["jr_casa"]="menucasam_3";
<br>*/
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #0000BB">2001</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #0000BB">2024</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #0000BB">2003</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]=</span><span style="color: #0000BB">2023</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]=</span><span style="color: #0000BB">2012</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">]=</span><span style="color: #0000BB">2007</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]=</span><span style="color: #0000BB">2010</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">]=</span><span style="color: #0000BB">2013</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">]=</span><span style="color: #0000BB">2016</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"infantil"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2037</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"inf_comu"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2017</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"inf_casa"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2021</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"junior"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2036</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"jr_comu"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2018</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"jr_casa"</span><span style="color: #007700">]=</span><span style="color: #0000BB">2022</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #DD0000">"NO"</span><span style="color: #007700">]=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Pendent"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Confirmada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Pagada&lt;br&gt;TRANFERÈNCIA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Denegada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Eliminada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Caducada"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Pagada&lt;br&gt;TARJA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$estat</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #DD0000">"ERROR"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#FF3300"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#FFCC00"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#33CC33"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#886666"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#555555"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#777777"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#33CC33"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$color</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]=</span><span style="color: #DD0000">"#FF33FF"</span><span style="color: #007700">;
<br>
<br>
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"nom"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"nombre"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"adults"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"adultos"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"nens&nbsp;de&nbsp;10&nbsp;a&nbsp;14"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"niños&nbsp;de&nbsp;10&nbsp;a&nbsp;14"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"nens&nbsp;de&nbsp;4&nbsp;a&nbsp;9"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"niños&nbsp;de&nbsp;4&nbsp;a&nbsp;9"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"cotxets&nbsp;nadó"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"cochecito&nbsp;bebé"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"observacions"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">6</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"observaciones"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"preu&nbsp;reserva"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">7</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"precio&nbsp;reserva"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">8</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"data&nbsp;reserva"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">8</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"fecha&nbsp;reserva"</span><span style="color: #007700">;
<br>
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Moltes&nbsp;gràcies.&nbsp;La&nbsp;reserva&nbsp;ha&nbsp;estat&nbsp;enviada&nbsp;a&nbsp;Can&nbsp;Borrell.&nbsp;Rebrà&nbsp;un&nbsp;correu&nbsp;electrònic&nbsp;a&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&nbsp;amb&nbsp;la&nbsp;confirmació&nbsp;de&nbsp;la&nbsp;reserva&nbsp;i&nbsp;les&nbsp;instruccions&nbsp;per&nbsp;fer&nbsp;el&nbsp;pagament."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"LA&nbsp;RESERVA&nbsp;NO&nbsp;SERÀ&nbsp;EFECTIVA&nbsp;FINS&nbsp;QUE&nbsp;REBI&nbsp;EL&nbsp;CORREU&nbsp;I&nbsp;REALITZI&nbsp;EL&nbsp;PAGAMENT"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Muchas&nbsp;gracias.&nbsp;La&nbsp;reserva&nbsp;ha&nbsp;sido&nbsp;enviada&nbsp;a&nbsp;Can&nbsp;Borrell.&nbsp;Recibirá&nbsp;un&nbsp;correo&nbsp;electrónico&nbsp;en&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&nbsp;con&nbsp;la&nbsp;confirmación&nbsp;de&nbsp;la&nbsp;reserva&nbsp;y&nbsp;las&nbsp;instrucciones&nbsp;para&nbsp;realizar&nbsp;el&nbsp;pago."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"LA&nbsp;RESERVA&nbsp;NO&nbsp;SERÁ&nbsp;EFECTIVA&nbsp;HASTA&nbsp;QUE&nbsp;RECIVA&nbsp;EL&nbsp;CORREO&nbsp;Y&nbsp;REALICE&nbsp;EL&nbsp;PAGO"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">10</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"CONFIRMACIÓ&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">11</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Ens&nbsp;complau&nbsp;informar-lo&nbsp;que&nbsp;la&nbsp;seva&nbsp;reserva&nbsp;ha&nbsp;estat&nbsp;confirmada.&nbsp;Per&nbsp;finalitzar&nbsp;el&nbsp;procès&nbsp;accedeixi&nbsp;al&nbsp;sistema&nbsp;de&nbsp;pagament&nbsp;fent&nbsp;click&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">12</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"El&nbsp;pagament&nbsp;es&nbsp;pot&nbsp;realitzar&nbsp;fins&nbsp;el&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">13</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">".&nbsp;&lt;b&gt;Després&nbsp;d'aquesta&nbsp;data&nbsp;la&nbsp;reserva&nbsp;deixa&nbsp;de&nbsp;ser&nbsp;vàlida&lt;/b&gt;."</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">10</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"CONFIRMACIÓN&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">11</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Nos&nbsp;complace&nbsp;informarle&nbsp;que&nbsp;su&nbsp;reserva&nbsp;ha&nbsp;sido&nbsp;confirmada,&nbsp;Para&nbsp;finalizar&nbsp;el&nbsp;proceso&nbsp;acceda&nbsp;al&nbsp;sistema&nbsp;de&nbsp;pago&nbsp;haciendo&nbsp;click&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">12</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"El&nbsp;pago&nbsp;se&nbsp;podré&nbsp;realizar&nbsp;hasta&nbsp;el&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">13</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">".&nbsp;&lt;b&gt;Pasada&nbsp;esta&nbsp;fecha&nbsp;la&nbsp;reserva&nbsp;dejará&nbsp;de&nbsp;ser&nbsp;válida&lt;/b&gt;."</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">20</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"CONFIRMACIÓ&nbsp;DE&nbsp;PAGAMENT&nbsp;DE&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">21</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Ens&nbsp;complau&nbsp;informar-lo&nbsp;que&nbsp;hem&nbsp;rebut&nbsp;correctament&nbsp;el&nbsp;pagament&nbsp;de&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">22</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"€&nbsp;La&nbsp;seva&nbsp;reserva&nbsp;queda&nbsp;registrada.&lt;br&gt;&lt;br&gt;L'esperem&nbsp;el&nbsp;proper&nbsp;"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">20</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"CONFIRMACIÓN&nbsp;DE&nbsp;PAGO&nbsp;DE&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">21</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Nos&nbsp;complace&nbsp;informarle&nbsp;que&nbsp;hemos&nbsp;recibido&nbsp;correctamente&nbsp;el&nbsp;pago&nbsp;de&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">22</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"€.&nbsp;Su&nbsp;reserva&nbsp;queda&nbsp;registrada&lt;br&gt;Le&nbsp;esperamos&nbsp;el&nbsp;próximo&nbsp;"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">30</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"DENEGACIÓ&nbsp;DE&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">31</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Ho&nbsp;sentim,&nbsp;la&nbsp;seva&nbsp;sol·licitud&nbsp;ha&nbsp;estat&nbsp;denegada&nbsp;perquè&nbsp;no&nbsp;hi&nbsp;ha&nbsp;prou&nbsp;espai&nbsp;pels&nbsp;coberts&nbsp;que&nbsp;ha&nbsp;sol·licitat&nbsp;per&nbsp;aquest&nbsp;dia.&nbsp;Si&nbsp;ho&nbsp;desitja&nbsp;pot&nbsp;fer&nbsp;la&nbsp;reserva&nbsp;per&nbsp;una&nbsp;altra&nbsp;data&nbsp;fent&nbsp;click&nbsp;&lt;a&nbsp;href='http://www.can-borrell.com/cat/contactar.php'&nbsp;class='dins'&gt;&lt;aquí&gt;&lt;/a&gt;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">32</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">30</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"DENEGACIÓN&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">31</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Lo&nbsp;sentimos,&nbsp;su&nbsp;solicitud&nbsp;ha&nbsp;sido&nbsp;denegada&nbsp;porque&nbsp;no&nbsp;hay&nbsp;espacio&nbsp;suficiente&nbsp;para&nbsp;los&nbsp;cubiertos&nbsp;que&nbsp;ha&nbsp;solicitado&nbsp;para&nbsp;este&nbsp;dia.&nbsp;Si&nbsp;lo&nbsp;desea&nbsp;puede&nbsp;hacer&nbsp;la&nbsp;reserva&nbsp;para&nbsp;otra&nbsp;fecha&nbsp;haciendo&nbsp;click&nbsp;&lt;a&nbsp;href='http://www.can-borrell.com/esp/contactar.php'&nbsp;class='dins'&gt;&lt;aquí&gt;&lt;/a&gt;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">32</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Si&nbsp;té&nbsp;qualsevol&nbsp;dubte&nbsp;posi's&nbsp;en&nbsp;contacte&nbsp;amb&nbsp;nosaltres&nbsp;a&nbsp;&lt;a&nbsp;href='mailto:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MAIL_RESTAURANT</span><span style="color: #007700">.</span><span style="color: #DD0000">"'&nbsp;class='dins'&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MAIL_RESTAURANT</span><span style="color: #007700">.</span><span style="color: #DD0000">"&lt;/a&gt;&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Si&nbsp;tiene&nbsp;cualquier&nbsp;duda&nbsp;póngase&nbsp;en&nbsp;contacto&nbsp;con&nbsp;nosotros&nbsp;en&nbsp;&lt;a&nbsp;href='mailto:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MAIL_RESTAURANT</span><span style="color: #007700">.</span><span style="color: #DD0000">"'&nbsp;class='dins'&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MAIL_RESTAURANT</span><span style="color: #007700">.</span><span style="color: #DD0000">"&lt;/a&gt;&nbsp;"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">40</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Per&nbsp;finalitzar&nbsp;el&nbsp;procès&nbsp;de&nbsp;reserva,&nbsp;cal&nbsp;que&nbsp;realitzi&nbsp;el&nbsp;pagament&nbsp;de&nbsp;l'import&nbsp;de&nbsp;la&nbsp;reserva.&nbsp;Per&nbsp;reserves&nbsp;online,&nbsp;el&nbsp;restaurant&nbsp;només&nbsp;admet&nbsp;pagaments&nbsp;amb&nbsp;tarja&nbsp;de&nbsp;crèdit.
<br>&lt;br/&gt;Faci&nbsp;click&nbsp;al&nbsp;botó&nbsp;i&nbsp;el&nbsp;transferirem&nbsp;directament&nbsp;al&nbsp;terminal&nbsp;de&nbsp;comerç&nbsp;electrònic&nbsp;de&nbsp;la&nbsp;Caixa&nbsp;de&nbsp;Sabadell."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">40</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Para&nbsp;finalizar&nbsp;el&nbsp;proceso&nbsp;de&nbsp;reserva,&nbsp;es&nbsp;necesario&nbsp;que&nbsp;realice&nbsp;el&nbsp;pago&nbsp;del&nbsp;importe&nbsp;de&nbsp;la&nbsp;reserva.&nbsp;Para&nbsp;reservas&nbsp;online,&nbsp;el&nbsp;restaurant&nbsp;sólo&nbsp;adminte&nbsp;pagos&nbsp;con&nbsp;tarjeta&nbsp;de&nbsp;crédito.&nbsp;Haga&nbsp;click&nbsp;sobre&nbsp;el&nbsp;botón&nbsp;y&nbsp;le&nbsp;transferiremos&nbsp;directamente&nbsp;al&nbsp;terminal&nbsp;de&nbsp;comercio&nbsp;electrónico&nbsp;de&nbsp;Caixa&nbsp;de&nbsp;Sabadell"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">41</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">41</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br>
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">50</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"RECORDATORI&nbsp;DE&nbsp;PAGAMENT&nbsp;DE&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">51</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Li&nbsp;recordem&nbsp;que&nbsp;per&nbsp;confirmar&nbsp;la&nbsp;seva&nbsp;reserva&nbsp;al&nbsp;Restaurant&nbsp;Can&nbsp;Borrell&nbsp;ha&nbsp;d'efectuar&nbsp;el&nbsp;pagament&nbsp;abans&nbsp;del&lt;br&gt;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">52</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Si&nbsp;desitja&nbsp;realitzar&nbsp;el&nbsp;pagament&nbsp;amb&nbsp;tarja&nbsp;de&nbsp;crèdit&nbsp;faci&nbsp;click&nbsp;"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">50</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"RECORDATORIO&nbsp;DE&nbsp;PAGO&nbsp;DE&nbsp;RESERVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">51</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Le&nbsp;recordamos&nbsp;que&nbsp;para&nbsp;confirmar&nbsp;su&nbsp;reserva&nbsp;en&nbsp;el&nbsp;Restaurante&nbsp;Can&nbsp;Borrell&nbsp;ha&nbsp;de&nbsp;realizar&nbsp;el&nbsp;pago&nbsp;antes&nbsp;del&lt;br&gt;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">52</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Si&nbsp;desea&nbsp;realizar&nbsp;el&nbsp;pago&nbsp;con&nbsp;targeta&nbsp;de&nbsp;crédito,&nbsp;haga&nbsp;click&nbsp;"</span><span style="color: #007700">;
<br>
<br>
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">75</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">75</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">76</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">76</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">75</span><span style="color: #007700">][</span><span style="color: #DD0000">'ANULAT_cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Si&nbsp;prefereix&nbsp;fer&nbsp;el&nbsp;pagamanent&nbsp;per&nbsp;transferència&nbsp;o&nbsp;ingrès&nbsp;en&nbsp;efectiu,&nbsp;si&nbsp;us&nbsp;plau,&nbsp;&lt;b&gt;FACI-HO&nbsp;ABANS&nbsp;DE&nbsp;LA&nbsp;DATA&nbsp;INDICADA&lt;/b&gt;,&nbsp;i&nbsp;indiqui&nbsp;com&nbsp;a&nbsp;concepte&nbsp;aquest&nbsp;identificador&nbsp;de&nbsp;reserva:&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">75</span><span style="color: #007700">][</span><span style="color: #DD0000">'ANULAT_esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Si&nbsp;prefiere&nbsp;pagar&nbsp;por&nbsp;transferencia&nbsp;o&nbsp;ingreso&nbsp;en&nbsp;efectivo,&nbsp;por&nbsp;favor,&nbsp;&lt;b&gt;HAGALO&nbsp;ANTES&nbsp;DE&nbsp;LA&nbsp;FECHA&nbsp;INDICADA&lt;/b&gt;,&nbsp;e&nbsp;indique&nbsp;como&nbsp;concepto&nbsp;el&nbsp;siguiente&nbsp;identificador&nbsp;de&nbsp;reserva:&nbsp;"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">76</span><span style="color: #007700">][</span><span style="color: #DD0000">'ANULAT_cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Un&nbsp;cop&nbsp;fet&nbsp;l'ingrès&nbsp;comuniquin's&nbsp;el&nbsp;pagament&nbsp;fent&nbsp;click&nbsp;aquí.&lt;br&gt;NO&nbsp;OBLIDI&nbsp;PORTAR&nbsp;EL&nbsp;JUSTIFICANT&nbsp;DE&nbsp;L'INGRÈS&nbsp;PER&nbsp;TAL&nbsp;QUE&nbsp;LI&nbsp;DESCOMPTEM&nbsp;L'IMPORT&nbsp;ABONAT&nbsp;PER&nbsp;LA&nbsp;RESERVA&nbsp;QUAN&nbsp;PASSI&nbsp;PER&nbsp;CAIXA&nbsp;AL&nbsp;RESTAURANT"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">76</span><span style="color: #007700">][</span><span style="color: #DD0000">'ANULAT_esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Una&nbsp;vez&nbsp;realizado&nbsp;el&nbsp;ingreso,&nbsp;comnuníquenos&nbsp;el&nbsp;pago&nbsp;haciendo&nbsp;click&nbsp;aqui.&lt;br&gt;NO&nbsp;OLVIDE&nbsp;LLEVAR&nbsp;EL&nbsp;JUSTIFICANTW&nbsp;DEL&nbsp;INGRESO&nbsp;PARA&nbsp;QUE&nbsp;LE&nbsp;DESCONTEMOS&nbsp;EL&nbsp;IMPORTE&nbsp;ABONADO&nbsp;POR&nbsp;LA&nbsp;RESERVA&nbsp;CUANDO&nbsp;PASE&nbsp;POR&nbsp;CAJA&nbsp;EN&nbsp;EL&nbsp;RESTAURANT"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">77</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Si&nbsp;decideix&nbsp;cancel·lar&nbsp;la&nbsp;reserva,&nbsp;faci&nbsp;click&nbsp;aquí"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">77</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&lt;/br&gt;Si&nbsp;decide&nbsp;cancelar&nbsp;la&nbsp;reserva,&nbsp;haga&nbsp;click&nbsp;aquí"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">79</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"RESPOSTA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">79</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"RESPUESTA"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">80</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Si&nbsp;us&nbsp;plau,&nbsp;NO&nbsp;FACI&nbsp;EL&nbsp;PAGAMENT&nbsp;PASSADA&nbsp;AQUESTA&nbsp;DATA,&nbsp;donat&nbsp;que&nbsp;un&nbsp;cop&nbsp;caduca&nbsp;la&nbsp;reserva&nbsp;no&nbsp;podem&nbsp;garantir&nbsp;que&nbsp;la&nbsp;taula&nbsp;segueixi&nbsp;disponible"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">80</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Por&nbsp;favor,&nbsp;NO&nbsp;REALICE&nbsp;EL&nbsp;PAGO&nbsp;PASADA&nbsp;ESTA&nbsp;FECHA,&nbsp;ya&nbsp;que&nbsp;una&nbsp;vez&nbsp;caducada&nbsp;la&nbsp;reserva&nbsp;no&nbsp;podemos&nbsp;garantizar&nbsp;que&nbsp;la&nbsp;mesa&nbsp;siga&nbsp;disponible"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">81</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"La&nbsp;reserva&nbsp;pel&nbsp;%diaReserva&nbsp;caduca&nbsp;avui.&nbsp;Per&nbsp;confirmar&nbsp;faci&nbsp;ingres&nbsp;de&nbsp;%importReserva&nbsp;E&nbsp;a&nbsp;NC.2059-0280-45-8000215539&nbsp;(indiqui&nbsp;ref:%idReserva).&nbsp;INGRES&nbsp;NO&nbsp;VALID&nbsp;DESPRES&nbsp;D'AVUI.&nbsp;+info:can-borrell.com/reserva.php?%idReserva"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">81</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"La&nbsp;reserva&nbsp;del&nbsp;%diaReserva&nbsp;caduca&nbsp;hoy.&nbsp;Para&nbsp;confirmar&nbsp;haga&nbsp;ingreso&nbsp;de&nbsp;%importReserva&nbsp;E&nbsp;al&nbsp;NC.2059-0280-45-8000215539&nbsp;(indique&nbsp;ref:%idReserva).&nbsp;INGRESO&nbsp;NO&nbsp;VALIDO&nbsp;DESPUES&nbsp;HOY.&nbsp;+info:can-borrell.com/reserva.php?%idReserva"</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">/////////////////////////////////////////////////////
<br>//FACTURA&nbsp;PROFORMA
<br>/////////////////////////////////////////////////////
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">81</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"FACTURA&nbsp;PROFORMA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">81</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"FACTURA&nbsp;PROFORMA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">82</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"La&nbsp;present&nbsp;factura&nbsp;proforma&nbsp;només&nbsp;té&nbsp;validesa&nbsp;fins&nbsp;a&nbsp;l'emisió&nbsp;de&nbsp;la&nbsp;factura&nbsp;definitiva&nbsp;en&nbsp;fer&nbsp;el&nbsp;pagament&nbsp;dels&nbsp;menús&nbsp;al&nbsp;restaurant"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">82</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"La&nbsp;presente&nbsp;factura&nbsp;proforma&nbsp;sólo&nbsp;tiene&nbsp;validez&nbsp;hasta&nbsp;la&nbsp;emisión&nbsp;de&nbsp;la&nbsp;factura&nbsp;definitiva&nbsp;tras&nbsp;realizar&nbsp;el&nbsp;pago&nbsp;de&nbsp;los&nbsp;menús&nbsp;en&nbsp;el&nbsp;restaurant"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">83</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"En&nbsp;el&nbsp;moment&nbsp;d'emetre's&nbsp;aquesta&nbsp;factura&nbsp;proforma,&nbsp;l'import&nbsp;abonat&nbsp;és&nbsp;el&nbsp;de&nbsp;la&nbsp;reserva"</span><span style="color: #007700">;
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">83</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"En&nbsp;el&nbsp;momento&nbsp;de&nbsp;emitirse&nbsp;esta&nbsp;factura&nbsp;proforma,&nbsp;el&nbsp;importe&nbsp;abonado&nbsp;es&nbsp;el&nbsp;de&nbsp;la&nbsp;reserva"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">90</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"i&nbsp;no&nbsp;l'import&nbsp;total&nbsp;indicat,&nbsp;que&nbsp;serà&nbsp;abonat&nbsp;directament&nbsp;al&nbsp;restaurant&nbsp;el&nbsp;dia&nbsp;reservat&nbsp;(descomptant&nbsp;l'import&nbsp;de&nbsp;la&nbsp;reserva)&nbsp;
<br>&lt;br/&gt;El&nbsp;preu&nbsp;total&nbsp;que&nbsp;s'indica&nbsp;és&nbsp;una&nbsp;estimació&nbsp;basada&nbsp;en&nbsp;les&nbsp;dades&nbsp;introduïdes&nbsp;al&nbsp;formulari&nbsp;de&nbsp;reserva,&nbsp;i&nbsp;pot&nbsp;variar&nbsp;segons&nbsp;les&nbsp;consumicions&nbsp;que&nbsp;es&nbsp;realitzin&nbsp;el&nbsp;dia&nbsp;de&nbsp;l'event."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">90</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"&nbsp;i&nbsp;no&nbsp;el&nbsp;importe&nbsp;total&nbsp;indicado,&nbsp;que&nbsp;será&nbsp;abonado&nbsp;directamente&nbsp;en&nbsp;el&nbsp;restaurante&nbsp;el&nbsp;dia&nbsp;reservado&nbsp;(descontando&nbsp;el&nbsp;importe&nbsp;de&nbsp;la&nbsp;reserva)&nbsp;
<br>&lt;br/&gt;El&nbsp;precio&nbsp;total&nbsp;que&nbsp;se&nbsp;indica&nbsp;es&nbsp;una&nbsp;estimación&nbsp;basada&nbsp;en&nbsp;los&nbsp;datos&nbsp;introducidos&nbsp;en&nbsp;el&nbsp;formulario&nbsp;de&nbsp;reserva,&nbsp;y&nbsp;podrá&nbsp;variar&nbsp;según&nbsp;las&nbsp;consumiciones&nbsp;que&nbsp;se&nbsp;realicen&nbsp;el&nbsp;día&nbsp;del&nbsp;evento."</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">84</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Adreça"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">84</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Dirección"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">85</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Import&nbsp;abonat&nbsp;(reserva)"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">85</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Importe&nbsp;abonado&nbsp;(reserva)"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">86</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Subtotal"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">86</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Subtotal"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">87</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"IVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">87</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"IVA"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">88</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Import&nbsp;total"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">88</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Importe&nbsp;total"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">89</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Data"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">89</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Fecha"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">91</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Client"</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">91</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">"Cliente"</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">/////////////////////////////////////////////////////
<br>/////////////////////////////////////////////////////
<br>/////////////////////////////////////////////////////
<br>
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">92</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">92</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">93</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">9393</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">94</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">94</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">95</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">95</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">96</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">96</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">97</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">97</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">98</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">98</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">99</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">99</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">100</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">100</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">101</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">101</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">102</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">102</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">103</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">103</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">104</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">104</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">105</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">105</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">106</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">106</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">107</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">107</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">108</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">108</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">109</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">109</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">110</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">110</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">111</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">111</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">112</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">112</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">113</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">113</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">114</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">114</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">115</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">115</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">116</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">116</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">117</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">117</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">118</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">118</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">119</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br></span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">119</span><span style="color: #007700">][</span><span style="color: #DD0000">'esp'</span><span style="color: #007700">]=</span><span style="color: #DD0000">""</span><span style="color: #007700">;
<br>
<br></span><span style="color: #FF8000">/******************************************************************************************************/
<br>
<br>
<br>/******************************************************************************************************/
<br>/******************************************************************************************************/
<br>//&nbsp;FUNCIONS&nbsp;GLOBALS
<br>/******************************************************************************************************/
<br>/******************************************************************************************************/
<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">calcula_preu</span><span style="color: #007700">(</span><span style="color: #0000BB">$persones</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">6</span><span style="color: #007700">;
<br>&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;&nbsp;24/11/2009&nbsp;REBAIXES:&nbsp;les&nbsp;reserves&nbsp;eren&nbsp;6euros&nbsp;(&lt;25pers)&nbsp;i&nbsp;10euros&nbsp;(&gt;25)
<br>&nbsp;&nbsp;//&nbsp;&nbsp;ara&nbsp;queda&nbsp;per&nbsp;4&nbsp;i&nbsp;7
<br>&nbsp;&nbsp;
<br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$persones</span><span style="color: #007700">==</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$persones</span><span style="color: #007700">=</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">]+</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">]+</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">];
<br>&nbsp;&nbsp;
<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$persones</span><span style="color: #007700">&lt;=</span><span style="color: #0000BB">25</span><span style="color: #007700">)
<br>&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">4</span><span style="color: #007700">*</span><span style="color: #0000BB">$persones</span><span style="color: #007700">;
<br>&nbsp;&nbsp;}
<br>&nbsp;&nbsp;else
<br>&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">7</span><span style="color: #007700">*</span><span style="color: #0000BB">$persones</span><span style="color: #007700">;
<br>&nbsp;&nbsp;}
<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,</span><span style="color: #0000BB">$preu</span><span style="color: #007700">);
<br>&nbsp;return(</span><span style="color: #0000BB">$preu</span><span style="color: #007700">);
<br>}
<br>
<br>function&nbsp;</span><span style="color: #0000BB">calcula_preu_real</span><span style="color: #007700">(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;require_once(</span><span style="color: #0000BB">ROOT</span><span style="color: #007700">.</span><span style="color: #DD0000">"Carta.php"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$carta</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">Carta</span><span style="color: #007700">();
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//global&nbsp;$tmenu;
<br>&nbsp;&nbsp;&nbsp;&nbsp;//$ini_array&nbsp;=&nbsp;parse_ini_file($doc_root."canborrellxxx.ini");//&nbsp;OBSOLETO&nbsp;-&gt;&nbsp;Preus&nbsp;CHEF
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuAdults</span><span style="color: #007700">=</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'menu'</span><span style="color: #007700">]];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuJR</span><span style="color: #007700">=isset(</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_1'</span><span style="color: #007700">]])?</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_1'</span><span style="color: #007700">]]:</span><span style="color: #DD0000">''</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuINF</span><span style="color: #007700">=isset(</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_2'</span><span style="color: #007700">]])?</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_2'</span><span style="color: #007700">]]:</span><span style="color: #DD0000">''</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuAdults</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">]&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuJR</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">]&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuINF</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$reserva</span><span style="color: #007700">=</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'preu_reserva'</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=(</span><span style="color: #0000BB">$preu&nbsp;</span><span style="color: #007700">&gt;=&nbsp;</span><span style="color: #0000BB">$reserva</span><span style="color: #007700">)?&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">:</span><span style="color: #0000BB">$reserva</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,</span><span style="color: #0000BB">$preu</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$preu</span><span style="color: #007700">;
<br>
<br>}
<br>
<br>function&nbsp;</span><span style="color: #0000BB">factura</span><span style="color: #007700">(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">,</span><span style="color: #0000BB">$out</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;require_once(</span><span style="color: #0000BB">ROOT</span><span style="color: #007700">.</span><span style="color: #DD0000">"Carta.php"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$carta</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">Carta</span><span style="color: #007700">();
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$txt</span><span style="color: #007700">,</span><span style="color: #0000BB">$lang</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$camps</span><span style="color: #007700">,</span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;CALCULA&nbsp;PREU
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$avui</span><span style="color: #007700">=</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"d/m/Y"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">=</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">.</span><span style="color: #DD0000">"editar/templates/factura_cli.lbi"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">Template</span><span style="color: #007700">(</span><span style="color: #DD0000">'.'</span><span style="color: #007700">,</span><span style="color: #DD0000">'comment'</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_file</span><span style="color: #007700">(</span><span style="color: #DD0000">"page"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"titol"</span><span style="color: #007700">,</span><span style="color: #DD0000">"FACTURA&nbsp;PROFORMA"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"id_reserva"</span><span style="color: #007700">,</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y"</span><span style="color: #007700">).</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'id_reserva'</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cdata_reserva"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">89</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"data"</span><span style="color: #007700">,</span><span style="color: #0000BB">$avui</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cif"</span><span style="color: #007700">,</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'factura_cif'</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cnom"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">91</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"nom"</span><span style="color: #007700">,</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'factura_nom'</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cadresa"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">84</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"adresa"</span><span style="color: #007700">,</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'factura_adresa'</span><span style="color: #007700">]);
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//global&nbsp;$tmenu;
<br>&nbsp;&nbsp;&nbsp;&nbsp;//$ini_array&nbsp;=&nbsp;parse_ini_file($doc_root."canborrellxxx.ini");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//OBSOLETO&nbsp;-&gt;&nbsp;PREUS&nbsp;CHEF
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuAdults</span><span style="color: #007700">=</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'menu'</span><span style="color: #007700">]];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuJR</span><span style="color: #007700">=</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_1'</span><span style="color: #007700">]];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$menuINF</span><span style="color: #007700">=</span><span style="color: #0000BB">$menuId</span><span style="color: #007700">[</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_2'</span><span style="color: #007700">]];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ini_array[$menuJR]*$fila['nens10_14']&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ini_array[$menuINF]*$fila['nens4_9'];
<br>
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">=(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'menu'</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">$mmenu</span><span style="color: #007700">[</span><span style="color: #0000BB">$m</span><span style="color: #007700">][</span><span style="color: #DD0000">'cat'</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'menu'</span><span style="color: #007700">,</span><span style="color: #0000BB">$n</span><span style="color: #007700">.</span><span style="color: #DD0000">"&nbsp;("</span><span style="color: #007700">.</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuAdults</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;euro;)"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'totadults'</span><span style="color: #007700">,</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuAdults</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">]));
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'cadults'</span><span style="color: #007700">,</span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">]&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'cnens10_14'</span><span style="color: #007700">,</span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;x&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_1'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;("</span><span style="color: #007700">.</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuJR</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;euro;)&nbsp;=&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f&nbsp;&amp;euro;"</span><span style="color: #007700">,</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuJR</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">]));&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">]&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'cnens4_9'</span><span style="color: #007700">,</span><span style="color: #0000BB">$camps</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;x&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'txt_2'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;("</span><span style="color: #007700">.</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuINF</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;euro;)&nbsp;=&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f&nbsp;&amp;euro;"</span><span style="color: #007700">,</span><span style="color: #0000BB">$carta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">preuPlat</span><span style="color: #007700">(</span><span style="color: #0000BB">$menuINF</span><span style="color: #007700">)*</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">]));&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cpreu_reserva"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">85</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"preu_reserva"</span><span style="color: #007700">,</span><span style="color: #0000BB">calcula_preu</span><span style="color: #007700">(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'adults'</span><span style="color: #007700">]+</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens10_14'</span><span style="color: #007700">]+</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'nens4_9'</span><span style="color: #007700">]));
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cpreu_subtotal"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">86</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"preu_subtotal"</span><span style="color: #007700">,</span><span style="color: #0000BB">$preu</span><span style="color: #007700">=</span><span style="color: #0000BB">calcula_preu_real</span><span style="color: #007700">(</span><span style="color: #0000BB">$fila</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">));
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cpreu_iva"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">87</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"preu_iva"</span><span style="color: #007700">,</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,</span><span style="color: #0000BB">$preu</span><span style="color: #007700">*</span><span style="color: #0000BB">IVA</span><span style="color: #007700">/</span><span style="color: #0000BB">100</span><span style="color: #007700">));
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"cpreu_total"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">88</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"preu_total"</span><span style="color: #007700">,</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,</span><span style="color: #0000BB">$preu</span><span style="color: #007700">*(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">IVA</span><span style="color: #007700">/</span><span style="color: #0000BB">100</span><span style="color: #007700">)));
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"nota1"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">82</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"nota2"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">83</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_var</span><span style="color: #007700">(</span><span style="color: #DD0000">"nota3"</span><span style="color: #007700">,</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">90</span><span style="color: #007700">][</span><span style="color: #0000BB">$lang</span><span style="color: #007700">]);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"OUT"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"page"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$html</span><span style="color: #007700">=</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #DD0000">"OUT"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$out</span><span style="color: #007700">)</span><span style="color: #0000BB">$t</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">p</span><span style="color: #007700">(</span><span style="color: #DD0000">"OUT"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//$html=iconv("UTF-8",&nbsp;"ISO-8859-1",&nbsp;$html);
<br>&nbsp;&nbsp;&nbsp;&nbsp;/*
<br>&nbsp;&nbsp;&nbsp;&nbsp;$html=utf8_decode($html);
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"&lt;br/&gt;";
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"&lt;br/&gt;";
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$html;
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"&lt;br/&gt;";
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"&lt;br/&gt;";
<br>&nbsp;&nbsp;&nbsp;&nbsp;*/
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'RELATIVE_PATH'</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">.</span><span style="color: #DD0000">'editar/fpdf/'</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;include_once&nbsp;(</span><span style="color: #0000BB">RELATIVE_PATH</span><span style="color: #007700">.</span><span style="color: #DD0000">'html2fpdf.php'</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pdf&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">HTML2FPDF</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;Creamos&nbsp;una&nbsp;instancia&nbsp;de&nbsp;la&nbsp;clase&nbsp;HTML2FPDF
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pdf&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">AddPage</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;Creamos&nbsp;una&nbsp;página
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$html</span><span style="color: #007700">=</span><span style="color: #0000BB">fpdf_text</span><span style="color: #007700">(</span><span style="color: #0000BB">$html</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//CHARSET
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pdf&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">WriteHTML</span><span style="color: #007700">(</span><span style="color: #0000BB">$html</span><span style="color: #007700">);</span><span style="color: #FF8000">//Volcamos&nbsp;el&nbsp;HTML&nbsp;contenido&nbsp;en&nbsp;la&nbsp;variable&nbsp;$html&nbsp;para&nbsp;crear&nbsp;el&nbsp;contenido&nbsp;del&nbsp;PDF
<br>&nbsp;&nbsp;&nbsp;&nbsp;//$carpeta_factures=$doc_root."editar/factures/";
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$carpeta_factures</span><span style="color: #007700">=</span><span style="color: #0000BB">$doc_root</span><span style="color: #007700">.</span><span style="color: #DD0000">"editar/"</span><span style="color: #007700">.</span><span style="color: #0000BB">INC_FILE_PATH</span><span style="color: #007700">.</span><span style="color: #DD0000">"factures/"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$nompdf</span><span style="color: #007700">=</span><span style="color: #0000BB">$carpeta_factures</span><span style="color: #007700">.</span><span style="color: #0000BB">NOM_FACTURA</span><span style="color: #007700">.</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y"</span><span style="color: #007700">).</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #DD0000">'id_reserva'</span><span style="color: #007700">].</span><span style="color: #DD0000">".pdf"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pdf&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">Output</span><span style="color: #007700">(</span><span style="color: #0000BB">$nompdf</span><span style="color: #007700">,</span><span style="color: #DD0000">"F"</span><span style="color: #007700">);</span><span style="color: #FF8000">//Volcamos&nbsp;el&nbsp;pdf&nbsp;generado&nbsp;con&nbsp;nombre&nbsp;'doc.pdf'.&nbsp;En&nbsp;este&nbsp;caso&nbsp;con&nbsp;el&nbsp;parametro&nbsp;'D'&nbsp;forzamos&nbsp;la&nbsp;descarga&nbsp;del&nbsp;mismo.
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;//$fila['id_reserva']=325;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$nompdf</span><span style="color: #007700">;
<br>}
<br>
<br>function&nbsp;</span><span style="color: #0000BB">fpdf_text</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">){
<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">iconv</span><span style="color: #007700">(</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'windows-1252'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);
<br>}
<br>
<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
<div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;563436ccfdf5769a42886a790c50f2be_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/db_Backup/bigdump.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="563436ccfdf5769a42886a790c50f2be_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">38303</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;BigDump&nbsp;ver.&nbsp;0.34b&nbsp;from&nbsp;2011-09-04<br>//&nbsp;Staggered&nbsp;import&nbsp;of&nbsp;an&nbsp;large&nbsp;MySQL&nbsp;Dump&nbsp;(like&nbsp;phpMyAdmin&nbsp;2.x&nbsp;Dump)<br>//&nbsp;Even&nbsp;through&nbsp;the&nbsp;webservers&nbsp;with&nbsp;hard&nbsp;runtime&nbsp;limit&nbsp;and&nbsp;those&nbsp;in&nbsp;safe&nbsp;mode<br>//&nbsp;Works&nbsp;fine&nbsp;with&nbsp;Internet&nbsp;Explorer&nbsp;7.0&nbsp;and&nbsp;Firefox&nbsp;2.x<br><br>//&nbsp;Author:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alexey&nbsp;Ozerov&nbsp;(alexey&nbsp;at&nbsp;ozerov&nbsp;dot&nbsp;de)&nbsp;<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AJAX&nbsp;&amp;&nbsp;CSV&nbsp;functionalities:&nbsp;Krzysiek&nbsp;Herod&nbsp;(kr81uni&nbsp;at&nbsp;wp&nbsp;dot&nbsp;pl)&nbsp;<br>//&nbsp;Copyright:&nbsp;&nbsp;&nbsp;&nbsp;GPL&nbsp;(C)&nbsp;2003-2011<br>//&nbsp;More&nbsp;Infos:&nbsp;&nbsp;&nbsp;http://www.ozerov.de/bigdump<br><br>//&nbsp;This&nbsp;program&nbsp;is&nbsp;free&nbsp;software;&nbsp;you&nbsp;can&nbsp;redistribute&nbsp;it&nbsp;and/or&nbsp;modify&nbsp;it&nbsp;under&nbsp;the<br>//&nbsp;terms&nbsp;of&nbsp;the&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License&nbsp;as&nbsp;published&nbsp;by&nbsp;the&nbsp;Free&nbsp;Software&nbsp;Foundation;<br>//&nbsp;either&nbsp;version&nbsp;2&nbsp;of&nbsp;the&nbsp;License,&nbsp;or&nbsp;(at&nbsp;your&nbsp;option)&nbsp;any&nbsp;later&nbsp;version.<br><br>//&nbsp;THIS&nbsp;SCRIPT&nbsp;IS&nbsp;PROVIDED&nbsp;AS&nbsp;IS,&nbsp;WITHOUT&nbsp;ANY&nbsp;WARRANTY&nbsp;OR&nbsp;GUARANTEE&nbsp;OF&nbsp;ANY&nbsp;KIND<br><br>//&nbsp;USAGE<br><br>//&nbsp;1.&nbsp;Adjust&nbsp;the&nbsp;database&nbsp;configuration&nbsp;in&nbsp;this&nbsp;file<br>//&nbsp;2.&nbsp;Remove&nbsp;the&nbsp;old&nbsp;tables&nbsp;on&nbsp;the&nbsp;target&nbsp;database&nbsp;if&nbsp;your&nbsp;dump&nbsp;doesn't&nbsp;contain&nbsp;"DROP&nbsp;TABLE"<br>//&nbsp;3.&nbsp;Create&nbsp;the&nbsp;working&nbsp;directory&nbsp;(e.g.&nbsp;dump)&nbsp;on&nbsp;your&nbsp;web&nbsp;server<br>//&nbsp;4.&nbsp;Upload&nbsp;bigdump.php&nbsp;and&nbsp;your&nbsp;dump&nbsp;files&nbsp;(.sql,&nbsp;.gz)&nbsp;via&nbsp;FTP&nbsp;to&nbsp;the&nbsp;working&nbsp;directory<br>//&nbsp;5.&nbsp;Run&nbsp;the&nbsp;bigdump.php&nbsp;from&nbsp;your&nbsp;browser&nbsp;via&nbsp;URL&nbsp;like&nbsp;http://www.yourdomain.com/dump/bigdump.php<br>//&nbsp;6.&nbsp;BigDump&nbsp;can&nbsp;start&nbsp;the&nbsp;next&nbsp;import&nbsp;session&nbsp;automatically&nbsp;if&nbsp;you&nbsp;enable&nbsp;the&nbsp;JavaScript<br>//&nbsp;7.&nbsp;Wait&nbsp;for&nbsp;the&nbsp;script&nbsp;to&nbsp;finish,&nbsp;do&nbsp;not&nbsp;close&nbsp;the&nbsp;browser&nbsp;window<br>//&nbsp;8.&nbsp;IMPORTANT:&nbsp;Remove&nbsp;bigdump.php&nbsp;and&nbsp;your&nbsp;dump&nbsp;files&nbsp;from&nbsp;the&nbsp;web&nbsp;server<br><br>//&nbsp;If&nbsp;Timeout&nbsp;errors&nbsp;still&nbsp;occure&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;adjust&nbsp;the&nbsp;$linepersession&nbsp;setting&nbsp;in&nbsp;this&nbsp;file<br><br>//&nbsp;LAST&nbsp;CHANGES<br><br>//&nbsp;***&nbsp;Fix&nbsp;ajax&nbsp;error&nbsp;on&nbsp;some&nbsp;OS<br>//&nbsp;***&nbsp;Fix&nbsp;ajax&nbsp;bug&nbsp;on&nbsp;Google&nbsp;Chrome&nbsp;and&nbsp;Safari<br>//&nbsp;***&nbsp;Query&nbsp;delimiter&nbsp;treatment&nbsp;added<br>//&nbsp;***&nbsp;Only&nbsp;list&nbsp;SQL,&nbsp;GZ&nbsp;and&nbsp;CSV&nbsp;files<br>//&nbsp;***&nbsp;Sort&nbsp;the&nbsp;file&nbsp;listing&nbsp;A-Z<br>//&nbsp;***&nbsp;Add&nbsp;string&nbsp;quotes&nbsp;setting<br><br><br>//&nbsp;Database&nbsp;configuration<br></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #0000BB">ROOT</span><span style="color: #007700">,</span><span style="color: #DD0000">"../"</span><span style="color: #007700">);<br>require_once(</span><span style="color: #0000BB">ROOT</span><span style="color: #007700">.</span><span style="color: #DD0000">"gestor_reserves.php"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$gestor</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">gestor_reserves</span><span style="color: #007700">();&nbsp;&nbsp;&nbsp;<br>if&nbsp;(!</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">valida_sessio</span><span style="color: #007700">(</span><span style="color: #0000BB">64</span><span style="color: #007700">))&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Location:&nbsp;index.php"</span><span style="color: #007700">);<br><br>include(</span><span style="color: #0000BB">ROOT</span><span style="color: #007700">.</span><span style="color: #0000BB">DB_CONNECTION_FILE</span><span style="color: #007700">);<br></span><span style="color: #FF8000">//die(DB_CONNECTION_FILE."&nbsp;&nbsp;sss&nbsp;&nbsp;".$hostname_canborrell);<br><br>/*&nbsp;Usuario&nbsp;para&nbsp;la&nbsp;conexion&nbsp;a&nbsp;Mysql.&nbsp;*/<br></span><span style="color: #0000BB">$db_username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$username_canborrell</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*&nbsp;Password&nbsp;para&nbsp;la&nbsp;conexion&nbsp;a&nbsp;Mysql.&nbsp;*/<br></span><span style="color: #0000BB">$db_password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$password_canborrell</span><span style="color: #007700">;<br>&nbsp;</span><span style="color: #FF8000">/*&nbsp;Host&nbsp;para&nbsp;la&nbsp;conexion&nbsp;a&nbsp;Mysql.&nbsp;*/<br></span><span style="color: #0000BB">$db_server&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$hostname_canborrell</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*&nbsp;Base&nbsp;de&nbsp;Datos&nbsp;que&nbsp;se&nbsp;seleccionará.&nbsp;*/<br></span><span style="color: #0000BB">$db_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$database_canborrell</span><span style="color: #007700">;<br><br><br><br></span><span style="color: #FF8000">//&nbsp;Other&nbsp;settings&nbsp;(optional)<br><br></span><span style="color: #0000BB">$filename&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Specify&nbsp;the&nbsp;dump&nbsp;filename&nbsp;to&nbsp;suppress&nbsp;the&nbsp;file&nbsp;selection&nbsp;dialog<br></span><span style="color: #0000BB">$ajax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;AJAX&nbsp;mode:&nbsp;import&nbsp;will&nbsp;be&nbsp;done&nbsp;without&nbsp;refreshing&nbsp;the&nbsp;website<br></span><span style="color: #0000BB">$linespersession&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">3000</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Lines&nbsp;to&nbsp;be&nbsp;executed&nbsp;per&nbsp;one&nbsp;import&nbsp;session<br></span><span style="color: #0000BB">$delaypersession&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;You&nbsp;can&nbsp;specify&nbsp;a&nbsp;sleep&nbsp;time&nbsp;in&nbsp;milliseconds&nbsp;after&nbsp;each&nbsp;session<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Works&nbsp;only&nbsp;if&nbsp;JavaScript&nbsp;is&nbsp;activated.&nbsp;Use&nbsp;to&nbsp;reduce&nbsp;server&nbsp;overrun<br><br>//&nbsp;CSV&nbsp;related&nbsp;settings&nbsp;(only&nbsp;if&nbsp;you&nbsp;use&nbsp;a&nbsp;CSV&nbsp;dump)<br><br></span><span style="color: #0000BB">$csv_insert_table&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Destination&nbsp;table&nbsp;for&nbsp;CSV&nbsp;files<br></span><span style="color: #0000BB">$csv_preempty_table&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;true:&nbsp;delete&nbsp;all&nbsp;entries&nbsp;from&nbsp;table&nbsp;specified&nbsp;in&nbsp;$csv_insert_table&nbsp;before&nbsp;processing<br></span><span style="color: #0000BB">$csv_delimiter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">','</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Field&nbsp;delimiter&nbsp;in&nbsp;CSV&nbsp;file<br></span><span style="color: #0000BB">$csv_add_quotes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;If&nbsp;your&nbsp;CSV&nbsp;data&nbsp;already&nbsp;have&nbsp;quotes&nbsp;around&nbsp;each&nbsp;field&nbsp;set&nbsp;it&nbsp;to&nbsp;false<br></span><span style="color: #0000BB">$csv_add_slashes&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;If&nbsp;your&nbsp;CSV&nbsp;data&nbsp;already&nbsp;have&nbsp;slashes&nbsp;in&nbsp;front&nbsp;of&nbsp;'&nbsp;and&nbsp;"&nbsp;set&nbsp;it&nbsp;to&nbsp;false<br><br>//&nbsp;Allowed&nbsp;comment&nbsp;markers:&nbsp;lines&nbsp;starting&nbsp;with&nbsp;these&nbsp;strings&nbsp;will&nbsp;be&nbsp;ignored&nbsp;by&nbsp;BigDump<br><br></span><span style="color: #0000BB">$comment</span><span style="color: #007700">[]=</span><span style="color: #DD0000">'#'</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Standard&nbsp;comment&nbsp;lines&nbsp;are&nbsp;dropped&nbsp;by&nbsp;default<br></span><span style="color: #0000BB">$comment</span><span style="color: #007700">[]=</span><span style="color: #DD0000">'--&nbsp;'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$comment</span><span style="color: #007700">[]=</span><span style="color: #DD0000">'DELIMITER'</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Ignore&nbsp;DELIMITER&nbsp;switch&nbsp;as&nbsp;it's&nbsp;not&nbsp;a&nbsp;valid&nbsp;SQL&nbsp;statement<br>//&nbsp;$comment[]='---';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Uncomment&nbsp;this&nbsp;line&nbsp;if&nbsp;using&nbsp;proprietary&nbsp;dump&nbsp;created&nbsp;by&nbsp;outdated&nbsp;mysqldump<br>//&nbsp;$comment[]='CREATE&nbsp;DATABASE';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Uncomment&nbsp;this&nbsp;line&nbsp;if&nbsp;your&nbsp;dump&nbsp;contains&nbsp;create&nbsp;database&nbsp;queries&nbsp;in&nbsp;order&nbsp;to&nbsp;ignore&nbsp;them<br></span><span style="color: #0000BB">$comment</span><span style="color: #007700">[]=</span><span style="color: #DD0000">'/*!'</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Or&nbsp;add&nbsp;your&nbsp;own&nbsp;string&nbsp;to&nbsp;leave&nbsp;out&nbsp;other&nbsp;proprietary&nbsp;things<br><br>//&nbsp;Pre-queries:&nbsp;SQL&nbsp;queries&nbsp;to&nbsp;be&nbsp;executed&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;each&nbsp;import&nbsp;session<br><br>//&nbsp;$pre_query[]='SET&nbsp;foreign_key_checks&nbsp;=&nbsp;0';<br>//&nbsp;$pre_query[]='Add&nbsp;additional&nbsp;queries&nbsp;if&nbsp;you&nbsp;want&nbsp;here';<br><br>//&nbsp;Connection&nbsp;charset&nbsp;should&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;dump&nbsp;file&nbsp;charset&nbsp;(utf8,&nbsp;latin1,&nbsp;cp1251,&nbsp;koi8r&nbsp;etc.)<br>//&nbsp;See&nbsp;http://dev.mysql.com/doc/refman/5.0/en/charset-charsets.html&nbsp;for&nbsp;the&nbsp;full&nbsp;list<br>//&nbsp;Change&nbsp;this&nbsp;if&nbsp;you&nbsp;have&nbsp;problems&nbsp;with&nbsp;non-latin&nbsp;letters<br><br></span><span style="color: #0000BB">$db_connection_charset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Default&nbsp;query&nbsp;delimiter:&nbsp;this&nbsp;character&nbsp;at&nbsp;the&nbsp;line&nbsp;end&nbsp;tells&nbsp;Bigdump&nbsp;where&nbsp;a&nbsp;SQL&nbsp;statement&nbsp;ends<br>//&nbsp;Can&nbsp;be&nbsp;changed&nbsp;by&nbsp;DELIMITER&nbsp;statement&nbsp;in&nbsp;the&nbsp;dump&nbsp;file&nbsp;(normally&nbsp;used&nbsp;when&nbsp;defining&nbsp;procedures/functions)<br><br></span><span style="color: #0000BB">$delimiter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">';'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;String&nbsp;quotes&nbsp;character<br><br></span><span style="color: #0000BB">$string_quotes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'\''</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Change&nbsp;to&nbsp;'"'&nbsp;if&nbsp;your&nbsp;dump&nbsp;file&nbsp;uses&nbsp;double&nbsp;qoutes&nbsp;for&nbsp;strings<br><br><br>//&nbsp;*******************************************************************************************<br>//&nbsp;If&nbsp;not&nbsp;familiar&nbsp;with&nbsp;PHP&nbsp;please&nbsp;don't&nbsp;change&nbsp;anything&nbsp;below&nbsp;this&nbsp;line<br>//&nbsp;*******************************************************************************************<br><br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$ajax</span><span style="color: #007700">)<br>&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">();<br><br></span><span style="color: #0000BB">define&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'VERSION'</span><span style="color: #007700">,</span><span style="color: #DD0000">'0.34b'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">define&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'DATA_CHUNK_LENGTH'</span><span style="color: #007700">,</span><span style="color: #0000BB">16384</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;How&nbsp;many&nbsp;chars&nbsp;are&nbsp;read&nbsp;per&nbsp;time<br></span><span style="color: #0000BB">define&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'MAX_QUERY_LINES'</span><span style="color: #007700">,</span><span style="color: #0000BB">300</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;How&nbsp;many&nbsp;lines&nbsp;may&nbsp;be&nbsp;considered&nbsp;to&nbsp;be&nbsp;one&nbsp;query&nbsp;(except&nbsp;text&nbsp;lines)<br></span><span style="color: #0000BB">define&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'TESTMODE'</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Set&nbsp;to&nbsp;true&nbsp;to&nbsp;process&nbsp;the&nbsp;file&nbsp;without&nbsp;actually&nbsp;accessing&nbsp;the&nbsp;database<br><br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Expires:&nbsp;Mon,&nbsp;1&nbsp;Dec&nbsp;2003&nbsp;01:00:00&nbsp;GMT"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Last-Modified:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">gmdate</span><span style="color: #007700">(</span><span style="color: #DD0000">"D,&nbsp;d&nbsp;M&nbsp;Y&nbsp;H:i:s"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;GMT"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cache-Control:&nbsp;no-store,&nbsp;no-cache,&nbsp;must-revalidate"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cache-Control:&nbsp;post-check=0,&nbsp;pre-check=0"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Pragma:&nbsp;no-cache"</span><span style="color: #007700">);<br><br>@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'auto_detect_line_endings'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>@</span><span style="color: #0000BB">set_time_limit</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br><br>if&nbsp;(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">"date_default_timezone_set"</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">"date_default_timezone_get"</span><span style="color: #007700">))<br>&nbsp;&nbsp;@</span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(@</span><span style="color: #0000BB">date_default_timezone_get</span><span style="color: #007700">());<br><br></span><span style="color: #FF8000">//&nbsp;Clean&nbsp;and&nbsp;strip&nbsp;anything&nbsp;we&nbsp;don't&nbsp;want&nbsp;from&nbsp;user's&nbsp;input&nbsp;[0.27b]<br><br></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$_REQUEST&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;<br>{<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$val&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"/[^_A-Za-z0-9-\.&amp;=&nbsp;;\$]/i"</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">);<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">?&gt;<br></span>&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN"&nbsp;"http://www.w3.org/TR/html4/loose.dtd"&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;BigDump&nbsp;ver.&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;(</span><span style="color: #0000BB">VERSION</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&lt;/title&gt;<br>&lt;meta&nbsp;http-equiv="CONTENT-TYPE"&nbsp;content="text/html;&nbsp;charset=UTF-8"/&gt;<br>&lt;meta&nbsp;http-equiv="CONTENT-LANGUAGE"&nbsp;content="EN"/&gt;<br><br>&lt;meta&nbsp;http-equiv="Cache-Control"&nbsp;content="no-cache/"/&gt;<br>&lt;meta&nbsp;http-equiv="Pragma"&nbsp;content="no-cache"/&gt;<br>&lt;meta&nbsp;http-equiv="Expires"&nbsp;content="-1"/&gt;<br>&lt;meta&nbsp;name="robots"&nbsp;content="noindex,&nbsp;nofollow"&gt;<br><br>&lt;style&nbsp;type="text/css"&gt;<br>&lt;!--<br><br>body<br>{&nbsp;background-color:#FFFFF0;<br>}<br><br>h1&nbsp;<br>{&nbsp;font-size:20px;<br>&nbsp;&nbsp;line-height:24px;<br>&nbsp;&nbsp;font-family:Arial,Helvetica,sans-serif;<br>&nbsp;&nbsp;margin-top:5px;<br>&nbsp;&nbsp;margin-bottom:5px;<br>&nbsp;&nbsp;color:red;<br>}<br>h1&nbsp;a{color:#F88;}<br><br>p,td,th<br>{&nbsp;font-size:14px;<br>&nbsp;&nbsp;line-height:18px;<br>&nbsp;&nbsp;font-family:Arial,Helvetica,sans-serif;<br>&nbsp;&nbsp;margin-top:5px;<br>&nbsp;&nbsp;margin-bottom:5px;<br>&nbsp;&nbsp;text-align:justify;<br>&nbsp;&nbsp;vertical-align:top;<br>}<br><br>p.centr<br>{&nbsp;<br>&nbsp;&nbsp;text-align:center;<br>}<br><br>p.smlcentr<br>{&nbsp;font-size:10px;<br>&nbsp;&nbsp;line-height:14px;<br>&nbsp;&nbsp;text-align:center;<br>}<br><br>p.error<br>{&nbsp;color:#FF0000;<br>&nbsp;&nbsp;font-weight:bold;<br>}<br><br>p.success<br>{&nbsp;color:#00DD00;<br>&nbsp;&nbsp;font-weight:bold;<br>}<br><br>p.successcentr<br>{&nbsp;color:#00DD00;<br>&nbsp;&nbsp;background-color:#DDDDFF;<br>&nbsp;&nbsp;font-weight:bold;<br>&nbsp;&nbsp;text-align:center;<br>}<br><br>#info&nbsp;td{&nbsp;&nbsp;padding:4px;}<br><br>td<br>{&nbsp;background-color:#F8F8F8;<br>&nbsp;&nbsp;text-align:left;<br>}<br><br>td.transparent<br>{&nbsp;background-color:#FFFFF0;<br>}<br><br>th<br>{&nbsp;font-weight:bold;<br>&nbsp;&nbsp;color:#FFFFFF;<br>&nbsp;&nbsp;background-color:#C00;<br>&nbsp;&nbsp;text-align:left;<br>}<br><br>td.right<br>{&nbsp;text-align:right;<br>}<br><br>form<br>{&nbsp;margin-top:5px;<br>&nbsp;&nbsp;margin-bottom:5px;<br>}<br><br>div.skin2<br>{<br>&nbsp;&nbsp;border-color:#C00;<br>&nbsp;&nbsp;border-width:2px;<br>&nbsp;&nbsp;border-style:solid;<br>&nbsp;&nbsp;background-color:#FFAAAA;<br>&nbsp;&nbsp;color:#800;<br>&nbsp;&nbsp;font-weight:bold;<br>&nbsp;&nbsp;text-align:center;<br>&nbsp;&nbsp;vertical-align:middle;<br>&nbsp;&nbsp;padding:3px;<br>&nbsp;&nbsp;margin:1px;<br>}<br><br>div.skin1<br>{<br>&nbsp;&nbsp;border-color:#C00;<br>&nbsp;&nbsp;border-width:5px;<br>&nbsp;&nbsp;border-style:solid;<br>&nbsp;/*&nbsp;background-color:#AAAAEE;*/<br>&nbsp;&nbsp;text-align:center;<br>&nbsp;&nbsp;vertical-align:middle;<br>&nbsp;&nbsp;padding:3px;<br>&nbsp;&nbsp;margin:1px;<br>}<br><br>td.bg3<br>{&nbsp;background-color:#EEEE99;<br>&nbsp;&nbsp;text-align:left;<br>&nbsp;&nbsp;vertical-align:top;<br>&nbsp;&nbsp;width:20%;<br>}<br><br>th.bg4<br>{&nbsp;background-color:#EEAA55;<br>&nbsp;&nbsp;text-align:left;<br>&nbsp;&nbsp;vertical-align:top;<br>&nbsp;&nbsp;width:20%;<br>}<br><br>td.bgpctbar<br>{&nbsp;background-color:#EEEEAA;<br>&nbsp;&nbsp;text-align:left;<br>&nbsp;&nbsp;vertical-align:middle;<br>&nbsp;&nbsp;width:80%;<br>}<br><br>--&gt;<br>&lt;/style&gt;<br><br>&lt;/head&gt;<br><br>&lt;body&gt;<br><br>&lt;center&gt;<br><br>&lt;table&nbsp;width="780"&nbsp;cellspacing="0"&nbsp;cellpadding="0"&gt;<br>&lt;tr&gt;&lt;td&nbsp;class="transparent"&gt;<br><br><span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">skin_open</span><span style="color: #007700">()&nbsp;{<br>echo&nbsp;(</span><span style="color: #DD0000">'&lt;div&nbsp;class="skin1"&gt;'</span><span style="color: #007700">);<br>}<br><br>function&nbsp;</span><span style="color: #0000BB">skin_close</span><span style="color: #007700">()&nbsp;{<br>echo&nbsp;(</span><span style="color: #DD0000">'&lt;/div&gt;'</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">skin_open</span><span style="color: #007700">();<br><br>echo&nbsp;</span><span style="color: #DD0000">'&lt;div&nbsp;class="skin2"&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"Est&amp;agrave;s&nbsp;a&nbsp;punt&nbsp;d'importar&nbsp;dades.&nbsp;Assegurat&nbsp;d'estar&nbsp;treballant&nbsp;amb&nbsp;la&nbsp;base&nbsp;de&nbsp;dades&nbsp;de&nbsp;desenvolupament:&nbsp;&lt;b&gt;canborrell_dev&lt;/b&gt;,&nbsp;i&nbsp;d'importar&nbsp;el&nbsp;fitxer&nbsp;de&nbsp;dades&nbsp;correcte."</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #DD0000">"Pujar&nbsp;una&nbsp;còpia&nbsp;DESTRUEIX&nbsp;DEFINITIVAMENT&nbsp;les&nbsp;dades&nbsp;existents&nbsp;al&nbsp;servidor.&nbsp;"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #DD0000">"ÉS&nbsp;DESACONSELLABLE&nbsp;PUJAR&nbsp;UNA&nbsp;CÒPIA&nbsp;A&nbsp;LA&nbsp;BASE&nbsp;DE&nbsp;DADES&nbsp;DE&nbsp;PRODUCCIÓ:&nbsp;canborrell"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #DD0000">"ÉS&nbsp;DESACONSELLABLE&nbsp;PUJAR&nbsp;UNA&nbsp;CÒPIA&nbsp;AL&nbsp;SERVIDOR&nbsp;DE&nbsp;PRODUCCIÓ:&nbsp;can-borrell.com"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;/div&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #0000BB">BR</span><span style="color: #007700">.</span><span style="color: #DD0000">"&lt;b&gt;Estàs&nbsp;connectat&nbsp;a:&lt;/b&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">BR</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;table&nbsp;id="info"&nbsp;style="margin:auto&nbsp;auto;"&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;tr&gt;&lt;td&gt;&lt;b&gt;Database&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$database_canborrell</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;tr&gt;&lt;td&gt;DB_HOST&lt;/td&gt;&lt;td&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$hostname_canborrell</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;/td&gt;&lt;/tr&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;tr&gt;&lt;td&gt;HOST&lt;/td&gt;&lt;td&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_HOST'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;/td&gt;&lt;/tr&gt;'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'&lt;/table&gt;'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">skin_close</span><span style="color: #007700">();<br><br></span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$file&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Check&nbsp;PHP&nbsp;version<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'version_compare'</span><span style="color: #007700">))<br>{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;PHP&nbsp;version&nbsp;4.1.0&nbsp;is&nbsp;required&nbsp;for&nbsp;BigDump&nbsp;to&nbsp;proceed.&nbsp;You&nbsp;have&nbsp;PHP&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">phpversion</span><span style="color: #007700">().</span><span style="color: #DD0000">"&nbsp;installed.&nbsp;Sorry!&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Check&nbsp;if&nbsp;mysql&nbsp;extension&nbsp;is&nbsp;available<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysqli_connect'</span><span style="color: #007700">))<br>{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;There&nbsp;is&nbsp;no&nbsp;mySQL&nbsp;extension&nbsp;available&nbsp;in&nbsp;your&nbsp;PHP&nbsp;installation.&nbsp;Sorry!&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Calculate&nbsp;PHP&nbsp;max&nbsp;upload&nbsp;size&nbsp;(handle&nbsp;settings&nbsp;like&nbsp;10M&nbsp;or&nbsp;100K)<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>{&nbsp;</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">=</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"upload_max_filesize"</span><span style="color: #007700">);<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/([0-9]+)K/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">,</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">))&nbsp;</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">=</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]*</span><span style="color: #0000BB">1024</span><span style="color: #007700">;<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/([0-9]+)M/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">,</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">))&nbsp;</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">=</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]*</span><span style="color: #0000BB">1024</span><span style="color: #007700">*</span><span style="color: #0000BB">1024</span><span style="color: #007700">;<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/([0-9]+)G/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">,</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">))&nbsp;</span><span style="color: #0000BB">$upload_max_filesize</span><span style="color: #007700">=</span><span style="color: #0000BB">$tempregs</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]*</span><span style="color: #0000BB">1024</span><span style="color: #007700">*</span><span style="color: #0000BB">1024</span><span style="color: #007700">*</span><span style="color: #0000BB">1024</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Get&nbsp;the&nbsp;current&nbsp;directory<br><br></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"folder"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"folder"</span><span style="color: #007700">]);<br>else&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"CGIA"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"CGIA"</span><span style="color: #007700">]);<br>else&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"ORIG_PATH_TRANSLATED"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"ORIG_PATH_TRANSLATED"</span><span style="color: #007700">]);<br>else&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"ORIG_SCRIPT_FILENAME"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"ORIG_SCRIPT_FILENAME"</span><span style="color: #007700">]);<br>else&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PATH_TRANSLATED"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PATH_TRANSLATED"</span><span style="color: #007700">]);<br>else&nbsp;<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">=</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">]);<br><br></span><span style="color: #FF8000">//&nbsp;Handle&nbsp;file&nbsp;upload<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"uploadbutton"</span><span style="color: #007700">]))<br>{&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"error"</span><span style="color: #007700">])==</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #007700">,</span><span style="color: #DD0000">"_"</span><span style="color: #007700">,</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"/[^_A-Za-z0-9-\.]/i"</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$uploaded_filepath</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"\\"</span><span style="color: #007700">,</span><span style="color: #DD0000">"/"</span><span style="color: #007700">,</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">.</span><span style="color: #DD0000">"/"</span><span style="color: #007700">.</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;File&nbsp;</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #DD0000">&nbsp;already&nbsp;exist!&nbsp;Delete&nbsp;and&nbsp;upload&nbsp;again!&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(!</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\.(sql|gz|csv))$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;You&nbsp;may&nbsp;only&nbsp;upload&nbsp;.sql&nbsp;.gz&nbsp;or&nbsp;.csv&nbsp;files.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(!@</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">],</span><span style="color: #0000BB">$uploaded_filepath</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;moving&nbsp;uploaded&nbsp;file&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;to&nbsp;the&nbsp;</span><span style="color: #0000BB">$uploaded_filepath</span><span style="color: #DD0000">&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Check&nbsp;the&nbsp;directory&nbsp;permissions&nbsp;for&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #DD0000">&nbsp;(must&nbsp;be&nbsp;777)!&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"success\"&gt;Uploaded&nbsp;file&nbsp;saved&nbsp;as&nbsp;</span><span style="color: #0000BB">$uploaded_filename</span><span style="color: #DD0000">&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;uploading&nbsp;file&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"dumpfile"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;}<br>}<br><br><br></span><span style="color: #FF8000">//&nbsp;Handle&nbsp;file&nbsp;deletion&nbsp;(delete&nbsp;only&nbsp;in&nbsp;the&nbsp;current&nbsp;directory&nbsp;for&nbsp;security&nbsp;reasons)<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">]!=</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">]))<br>{&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\.(sql|gz|csv))$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;@</span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">])))<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"success\"&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;was&nbsp;removed&nbsp;successfully&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Can't&nbsp;remove&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Connect&nbsp;to&nbsp;the&nbsp;database,&nbsp;set&nbsp;charset&nbsp;and&nbsp;execute&nbsp;pre-queries<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">TESTMODE</span><span style="color: #007700">)<br>{&nbsp;</span><span style="color: #0000BB">$dbconnection&nbsp;</span><span style="color: #007700">=&nbsp;@(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$db_server</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$db_username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$db_password</span><span style="color: #007700">));<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;((bool)</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"USE&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$db_name</span><span style="color: #007700">));<br>&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$dbconnection&nbsp;</span><span style="color: #007700">||&nbsp;!</span><span style="color: #0000BB">$db</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Database&nbsp;connection&nbsp;failed&nbsp;due&nbsp;to&nbsp;"</span><span style="color: #007700">.((</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">]))&nbsp;?&nbsp;</span><span style="color: #0000BB">mysqli_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">])&nbsp;:&nbsp;((</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;?&nbsp;</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Edit&nbsp;the&nbsp;database&nbsp;settings&nbsp;in&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&nbsp;or&nbsp;contact&nbsp;your&nbsp;database&nbsp;provider.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$db_connection_charset</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;@</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"SET&nbsp;NAMES&nbsp;</span><span style="color: #0000BB">$db_connection_charset</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset&nbsp;(</span><span style="color: #0000BB">$pre_query</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">sizeof&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$pre_query</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$pre_query</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$pre_query&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$pre_query_value</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!@</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pre_query_value</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;with&nbsp;pre-query.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Query:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">nl2br</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$pre_query_value</span><span style="color: #007700">))).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;MySQL:&nbsp;"</span><span style="color: #007700">.((</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">]))&nbsp;?&nbsp;</span><span style="color: #0000BB">mysqli_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">])&nbsp;:&nbsp;((</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;?&nbsp;</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>else<br>{&nbsp;</span><span style="color: #0000BB">$dbconnection&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>}<br><br><br></span><span style="color: #FF8000">//&nbsp;DIAGNOSTIC<br>//&nbsp;echo("&lt;h1&gt;Checkpoint!&lt;/h1&gt;");<br><br>//&nbsp;List&nbsp;uploaded&nbsp;files&nbsp;in&nbsp;multifile&nbsp;mode<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">==</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br>{&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dirhandle&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">opendir</span><span style="color: #007700">(</span><span style="color: #0000BB">$upload_dir</span><span style="color: #007700">))&nbsp;<br>&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$files</span><span style="color: #007700">=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">!==&nbsp;(</span><span style="color: #0000BB">$files</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">readdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirhandle</span><span style="color: #007700">)));<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">closedir</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirhandle</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dirhead</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(</span><span style="color: #0000BB">$files</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$files&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dirfile&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">"."&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$dirfile&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">".."&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">!=</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"SCRIPT_FILENAME"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.(sql|gz|csv)$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$dirhead</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;table&nbsp;width=\"100%\"&nbsp;cellspacing=\"2\"&nbsp;cellpadding=\"2\"&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;tr&gt;&lt;th&gt;Filename&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;th&gt;Date&amp;amp;Time&lt;/th&gt;&lt;th&gt;Type&lt;/th&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dirhead</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;tr&gt;&lt;td&gt;</span><span style="color: #0000BB">$dirfile</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"right\"&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">).</span><span style="color: #DD0000">"&lt;/td&gt;&lt;td&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">date&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"Y-m-d&nbsp;H:i:s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">filemtime</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">)).</span><span style="color: #DD0000">"&lt;/td&gt;"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.sql$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;SQL&lt;/td&gt;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.gz$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;GZip&lt;/td&gt;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.csv$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;CSV&lt;/td&gt;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;Misc&lt;/td&gt;"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.gz$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">"gzopen"</span><span style="color: #007700">))&nbsp;||&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.sql$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">)&nbsp;||&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.csv$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"?start=1&amp;amp;fn="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;amp;foffset=0&amp;amp;totalqueries=0&amp;amp;delimiter="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">).</span><span style="color: #DD0000">"\"&gt;Start&nbsp;Import&lt;/a&gt;&nbsp;into&nbsp;</span><span style="color: #0000BB">$db_name</span><span style="color: #DD0000">&nbsp;at&nbsp;</span><span style="color: #0000BB">$db_server</span><span style="color: #DD0000">&lt;/td&gt;\n&nbsp;&lt;td&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"?delete="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$dirfile</span><span style="color: #007700">).</span><span style="color: #DD0000">"\"&gt;Delete&nbsp;file&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;td&gt;&amp;nbsp;&lt;/td&gt;\n&nbsp;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dirhead</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;No&nbsp;uploaded&nbsp;SQL,&nbsp;GZ&nbsp;or&nbsp;CSV&nbsp;files&nbsp;found&nbsp;in&nbsp;the&nbsp;working&nbsp;directory&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;listing&nbsp;directory&nbsp;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #DD0000">&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br>}<br><br><br></span><span style="color: #FF8000">//&nbsp;Single&nbsp;file&nbsp;mode<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!isset&nbsp;(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">!=</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br>{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"?start=1&amp;amp;fn="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;amp;foffset=0&amp;amp;totalqueries=0\"&gt;Start&nbsp;Import&lt;/a&gt;&nbsp;from&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #DD0000">&nbsp;into&nbsp;</span><span style="color: #0000BB">$db_name</span><span style="color: #DD0000">&nbsp;at&nbsp;</span><span style="color: #0000BB">$db_server</span><span style="color: #DD0000">&lt;/p&gt;\n"</span><span style="color: #007700">);<br>}<br><br><br></span><span style="color: #FF8000">//&nbsp;File&nbsp;Upload&nbsp;Form<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">==</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br>{&nbsp;<br><br></span><span style="color: #FF8000">//&nbsp;Test&nbsp;permissions&nbsp;on&nbsp;working&nbsp;directory<br><br>&nbsp;&nbsp;</span><span style="color: #007700">do&nbsp;{&nbsp;</span><span style="color: #0000BB">$tempfilename</span><span style="color: #007700">=</span><span style="color: #0000BB">time</span><span style="color: #007700">().</span><span style="color: #DD0000">".tmp"</span><span style="color: #007700">;&nbsp;}&nbsp;while&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$tempfilename</span><span style="color: #007700">));<br>&nbsp;&nbsp;if&nbsp;(!(</span><span style="color: #0000BB">$tempfile</span><span style="color: #007700">=@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$tempfilename</span><span style="color: #007700">,</span><span style="color: #DD0000">"w"</span><span style="color: #007700">)))<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Upload&nbsp;form&nbsp;disabled.&nbsp;Permissions&nbsp;for&nbsp;the&nbsp;working&nbsp;directory&nbsp;&lt;i&gt;</span><span style="color: #0000BB">$upload_dir</span><span style="color: #DD0000">&lt;/i&gt;&nbsp;&lt;b&gt;must&nbsp;be&nbsp;set&nbsp;writable&nbsp;for&nbsp;the&nbsp;webserver&lt;/b&gt;&nbsp;in&nbsp;order&nbsp;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"to&nbsp;upload&nbsp;files&nbsp;here.&nbsp;Alternatively&nbsp;you&nbsp;can&nbsp;upload&nbsp;your&nbsp;dump&nbsp;files&nbsp;via&nbsp;FTP.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$tempfile</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">unlink&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$tempfilename</span><span style="color: #007700">);<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//echo&nbsp;("&lt;p&gt;You&nbsp;can&nbsp;now&nbsp;upload&nbsp;your&nbsp;dump&nbsp;file&nbsp;up&nbsp;to&nbsp;$upload_max_filesize&nbsp;bytes&nbsp;(".round&nbsp;($upload_max_filesize/1024/1024)."&nbsp;Mbytes)&nbsp;&nbsp;");<br>&nbsp;&nbsp;&nbsp;&nbsp;//echo&nbsp;("directly&nbsp;from&nbsp;your&nbsp;browser&nbsp;to&nbsp;the&nbsp;server.&nbsp;Alternatively&nbsp;you&nbsp;can&nbsp;upload&nbsp;your&nbsp;dump&nbsp;files&nbsp;of&nbsp;any&nbsp;size&nbsp;via&nbsp;FTP.&lt;/p&gt;\n");<br></span><span style="color: #0000BB">?&gt;<br></span>&lt;form&nbsp;method="POST"&nbsp;action="<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">]);&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&nbsp;enctype="multipart/form-data"&gt;<br>&lt;input&nbsp;type="hidden"&nbsp;name="MAX_FILE_SIZE"&nbsp;value="$upload_max_filesize"&gt;<br>&lt;p&gt;Dump&nbsp;file:&nbsp;&lt;input&nbsp;type="file"&nbsp;name="dumpfile"&nbsp;accept="*/*"&nbsp;size=60"&gt;&lt;/p&gt;<br>&lt;p&gt;&lt;input&nbsp;type="submit"&nbsp;name="uploadbutton"&nbsp;value="Upload"&gt;&lt;/p&gt;<br>&lt;/form&gt;<br><span style="color: #0000BB">&lt;?php<br>&nbsp;&nbsp;</span><span style="color: #007700">}<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Print&nbsp;the&nbsp;current&nbsp;mySQL&nbsp;connection&nbsp;charset<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">TESTMODE&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">]))<br>{&nbsp;<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">"SHOW&nbsp;VARIABLES&nbsp;LIKE&nbsp;'character_set_connection';"</span><span style="color: #007700">);<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_fetch_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br>&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$charset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'Value'</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;echo&nbsp;("&lt;p&gt;Note:&nbsp;The&nbsp;current&nbsp;mySQL&nbsp;connection&nbsp;charset&nbsp;is&nbsp;&lt;i&gt;$charset&lt;/i&gt;.&nbsp;Your&nbsp;dump&nbsp;file&nbsp;must&nbsp;be&nbsp;encoded&nbsp;in&nbsp;&lt;i&gt;$charset&lt;/i&gt;&nbsp;in&nbsp;order&nbsp;to&nbsp;avoid&nbsp;problems&nbsp;with&nbsp;non-latin&nbsp;characters.&nbsp;You&nbsp;can&nbsp;change&nbsp;the&nbsp;connection&nbsp;charset&nbsp;using&nbsp;the&nbsp;\$db_connection_charset&nbsp;variable&nbsp;in&nbsp;bigdump.php&lt;/p&gt;\n");<br>&nbsp;&nbsp;</span><span style="color: #007700">}<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Open&nbsp;the&nbsp;file<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]))<br>{&nbsp;<br><br></span><span style="color: #FF8000">//&nbsp;Set&nbsp;current&nbsp;filename&nbsp;($filename&nbsp;overrides&nbsp;$_REQUEST["fn"]&nbsp;if&nbsp;set)<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">!=</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">=</span><span style="color: #0000BB">$filename</span><span style="color: #007700">;<br>&nbsp;&nbsp;else&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">=</span><span style="color: #0000BB">urldecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"fn"</span><span style="color: #007700">]);<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">=</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Recognize&nbsp;GZip&nbsp;filename<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\.gz$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">))&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;if&nbsp;((!</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">$file</span><span style="color: #007700">=@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">,</span><span style="color: #DD0000">"r"</span><span style="color: #007700">))&nbsp;||&nbsp;(</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">$file</span><span style="color: #007700">=@</span><span style="color: #0000BB">gzopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">,</span><span style="color: #DD0000">"r"</span><span style="color: #007700">)))<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Can't&nbsp;open&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">.</span><span style="color: #DD0000">"&nbsp;for&nbsp;import&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Please,&nbsp;check&nbsp;that&nbsp;your&nbsp;dump&nbsp;file&nbsp;name&nbsp;contains&nbsp;only&nbsp;alphanumerical&nbsp;characters,&nbsp;and&nbsp;rename&nbsp;it&nbsp;accordingly,&nbsp;for&nbsp;example:&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #DD0000">."</span><span style="color: #007700">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;br&gt;Or,&nbsp;specify&nbsp;\$filename&nbsp;in&nbsp;bigdump.php&nbsp;with&nbsp;the&nbsp;full&nbsp;filename.&nbsp;"</span><span style="color: #007700">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;br&gt;Or,&nbsp;you&nbsp;have&nbsp;to&nbsp;upload&nbsp;the&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #DD0000">&nbsp;to&nbsp;the&nbsp;server&nbsp;first.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Get&nbsp;the&nbsp;file&nbsp;size&nbsp;(can't&nbsp;do&nbsp;it&nbsp;fast&nbsp;on&nbsp;gzipped&nbsp;files,&nbsp;no&nbsp;idea&nbsp;how)<br><br>&nbsp;&nbsp;</span><span style="color: #007700">else&nbsp;if&nbsp;((!</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;@</span><span style="color: #0000BB">fseek</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SEEK_END</span><span style="color: #007700">)==</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;||&nbsp;(</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;@</span><span style="color: #0000BB">gzseek</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)==</span><span style="color: #0000BB">0</span><span style="color: #007700">))<br>&nbsp;&nbsp;{&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$filesize&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftell</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</span><span style="color: #0000BB">$filesize&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gztell</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Always&nbsp;zero,&nbsp;ignore<br>&nbsp;&nbsp;</span><span style="color: #007700">}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;I&nbsp;can't&nbsp;seek&nbsp;into&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #DD0000">&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Stop&nbsp;if&nbsp;csv&nbsp;file&nbsp;is&nbsp;used,&nbsp;but&nbsp;$csv_insert_table&nbsp;is&nbsp;not&nbsp;set<br><br></span><span style="color: #007700">if&nbsp;((</span><span style="color: #0000BB">$csv_insert_table&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\.csv)$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">)))<br>{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;You&nbsp;have&nbsp;to&nbsp;specify&nbsp;\$csv_insert_table&nbsp;when&nbsp;using&nbsp;a&nbsp;CSV&nbsp;file.&nbsp;&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>}<br><br><br></span><span style="color: #FF8000">//&nbsp;*******************************************************************************************<br>//&nbsp;START&nbsp;IMPORT&nbsp;SESSION&nbsp;HERE<br>//&nbsp;*******************************************************************************************<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\.(sql|gz|csv))$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">))<br>{<br><br></span><span style="color: #FF8000">//&nbsp;Check&nbsp;start&nbsp;and&nbsp;foffset&nbsp;are&nbsp;numeric&nbsp;values<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">is_numeric</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">])&nbsp;||&nbsp;!</span><span style="color: #0000BB">is_numeric</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;UNEXPECTED:&nbsp;Non-numeric&nbsp;values&nbsp;for&nbsp;start&nbsp;and&nbsp;foffset&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]&nbsp;&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">]);<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Set&nbsp;the&nbsp;current&nbsp;delimiter&nbsp;if&nbsp;defined<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delimiter"</span><span style="color: #007700">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$delimiter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delimiter"</span><span style="color: #007700">];<br><br></span><span style="color: #FF8000">//&nbsp;Empty&nbsp;CSV&nbsp;table&nbsp;if&nbsp;requested<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]==</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$csv_insert_table&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$csv_preempty_table</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DELETE&nbsp;FROM&nbsp;</span><span style="color: #0000BB">$csv_insert_table</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">TESTMODE&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)))<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;when&nbsp;deleting&nbsp;entries&nbsp;from&nbsp;</span><span style="color: #0000BB">$csv_insert_table</span><span style="color: #DD0000">.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Query:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">nl2br</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">))).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;MySQL:&nbsp;"</span><span style="color: #007700">.((</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">]))&nbsp;?&nbsp;</span><span style="color: #0000BB">mysqli_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">])&nbsp;:&nbsp;((</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;?&nbsp;</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<br></span><span style="color: #FF8000">//&nbsp;Print&nbsp;start&nbsp;message<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">skin_open</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">TESTMODE</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;TEST&nbsp;MODE&nbsp;ENABLED&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;Processing&nbsp;file:&nbsp;&lt;b&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">.</span><span style="color: #DD0000">"&lt;/b&gt;&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"smlcentr\"&gt;Starting&nbsp;from&nbsp;line:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">skin_close</span><span style="color: #007700">();<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Check&nbsp;$_REQUEST["foffset"]&nbsp;upon&nbsp;$filesize&nbsp;(can't&nbsp;do&nbsp;it&nbsp;on&nbsp;gzipped&nbsp;files)<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">]&gt;</span><span style="color: #0000BB">$filesize</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;UNEXPECTED:&nbsp;Can't&nbsp;set&nbsp;file&nbsp;pointer&nbsp;behind&nbsp;the&nbsp;end&nbsp;of&nbsp;file&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Set&nbsp;file&nbsp;pointer&nbsp;to&nbsp;$_REQUEST["foffset"]<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;((!</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">fseek</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">])!=</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;||&nbsp;(</span><span style="color: #0000BB">$gzipmode&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">gzseek</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">])!=</span><span style="color: #0000BB">0</span><span style="color: #007700">)))<br>&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;UNEXPECTED:&nbsp;Can't&nbsp;set&nbsp;file&nbsp;pointer&nbsp;to&nbsp;offset:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Start&nbsp;processing&nbsp;queries&nbsp;from&nbsp;$file<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">=</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">=</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"totalqueries"</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">=</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$querylines</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Stay&nbsp;processing&nbsp;as&nbsp;long&nbsp;as&nbsp;the&nbsp;$linespersession&nbsp;is&nbsp;not&nbsp;reached&nbsp;or&nbsp;the&nbsp;query&nbsp;is&nbsp;still&nbsp;incomplete<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]+</span><span style="color: #0000BB">$linespersession&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">!=</span><span style="color: #DD0000">""</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br><br></span><span style="color: #FF8000">//&nbsp;Read&nbsp;the&nbsp;whole&nbsp;next&nbsp;line<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">substr&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #DD0000">"\n"&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">substr&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;!=&nbsp;</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">DATA_CHUNK_LENGTH</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">gzgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">DATA_CHUNK_LENGTH</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">===</span><span style="color: #DD0000">""</span><span style="color: #007700">)&nbsp;break;<br><br></span><span style="color: #FF8000">//&nbsp;Remove&nbsp;UTF8&nbsp;Byte&nbsp;Order&nbsp;Mark&nbsp;at&nbsp;the&nbsp;file&nbsp;beginning&nbsp;if&nbsp;any<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">]==</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'|^\xEF\xBB\xBF|'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Create&nbsp;an&nbsp;SQL&nbsp;query&nbsp;from&nbsp;CSV&nbsp;line<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;((</span><span style="color: #0000BB">$csv_insert_table&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/(\.csv)$/i"</span><span style="color: #007700">,</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$csv_add_slashes</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">addslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #0000BB">$csv_delimiter</span><span style="color: #007700">,</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$csv_add_quotes</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"'"</span><span style="color: #007700">.</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">"','"</span><span style="color: #007700">,</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">).</span><span style="color: #DD0000">"'"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">","</span><span style="color: #007700">,</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'INSERT&nbsp;INTO&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$csv_insert_table</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;VALUES&nbsp;('</span><span style="color: #007700">.</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">.</span><span style="color: #DD0000">');'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Handle&nbsp;DOS&nbsp;and&nbsp;Mac&nbsp;encoded&nbsp;linebreaks&nbsp;(I&nbsp;don't&nbsp;know&nbsp;if&nbsp;it&nbsp;really&nbsp;works&nbsp;on&nbsp;Win32&nbsp;or&nbsp;Mac&nbsp;Servers)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span><span style="color: #FF8000">//&nbsp;DIAGNOSTIC<br>//&nbsp;echo&nbsp;("&lt;p&gt;Line&nbsp;$linenumber:&nbsp;$dumpline&lt;/p&gt;\n");<br><br>//&nbsp;Recognize&nbsp;delimiter&nbsp;statement<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$inparents&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">strpos&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"DELIMITER&nbsp;"</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$delimiter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"DELIMITER&nbsp;"</span><span style="color: #007700">,</span><span style="color: #DD0000">""</span><span style="color: #007700">,</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">//&nbsp;Skip&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines&nbsp;only&nbsp;if&nbsp;NOT&nbsp;in&nbsp;parents<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$skipline</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$comment&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$comment_value</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br><br></span><span style="color: #FF8000">//&nbsp;DIAGNOSTIC<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;($comment_value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">)==</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">strpos&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$comment_value</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$skipline</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$skipline</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">++;<br><br></span><span style="color: #FF8000">//&nbsp;DIAGNOSTIC<br>//&nbsp;echo&nbsp;("&lt;p&gt;Comment&nbsp;line&nbsp;skipped&lt;/p&gt;\n");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Remove&nbsp;double&nbsp;back-slashes&nbsp;from&nbsp;the&nbsp;dumpline&nbsp;prior&nbsp;to&nbsp;count&nbsp;the&nbsp;quotes&nbsp;('\\'&nbsp;can&nbsp;only&nbsp;be&nbsp;within&nbsp;strings)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dumpline_deslashed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"\\\\"</span><span style="color: #007700">,</span><span style="color: #DD0000">""</span><span style="color: #007700">,</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Count&nbsp;'&nbsp;and&nbsp;\'&nbsp;(or&nbsp;"&nbsp;and&nbsp;\")&nbsp;in&nbsp;the&nbsp;dumpline&nbsp;to&nbsp;avoid&nbsp;query&nbsp;break&nbsp;within&nbsp;a&nbsp;text&nbsp;field&nbsp;ending&nbsp;by&nbsp;$delimiter<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parents</span><span style="color: #007700">=</span><span style="color: #0000BB">substr_count&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline_deslashed</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string_quotes</span><span style="color: #007700">)-</span><span style="color: #0000BB">substr_count&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline_deslashed</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\\</span><span style="color: #0000BB">$string_quotes</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$parents&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">=!</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Add&nbsp;the&nbsp;line&nbsp;to&nbsp;query<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Don't&nbsp;count&nbsp;the&nbsp;line&nbsp;if&nbsp;in&nbsp;parents&nbsp;(text&nbsp;fields&nbsp;may&nbsp;include&nbsp;unlimited&nbsp;linebreaks)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$querylines</span><span style="color: #007700">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span><span style="color: #FF8000">//&nbsp;Stop&nbsp;if&nbsp;query&nbsp;contains&nbsp;more&nbsp;lines&nbsp;as&nbsp;defined&nbsp;by&nbsp;MAX_QUERY_LINES<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$querylines</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">MAX_QUERY_LINES</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Stopped&nbsp;at&nbsp;the&nbsp;line&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">.&nbsp;&lt;/p&gt;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;At&nbsp;this&nbsp;place&nbsp;the&nbsp;current&nbsp;query&nbsp;includes&nbsp;more&nbsp;than&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">MAX_QUERY_LINES</span><span style="color: #007700">.</span><span style="color: #DD0000">"&nbsp;dump&nbsp;lines.&nbsp;That&nbsp;can&nbsp;happen&nbsp;if&nbsp;your&nbsp;dump&nbsp;file&nbsp;was&nbsp;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"created&nbsp;by&nbsp;some&nbsp;tool&nbsp;which&nbsp;doesn't&nbsp;place&nbsp;a&nbsp;semicolon&nbsp;followed&nbsp;by&nbsp;a&nbsp;linebreak&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;each&nbsp;query,&nbsp;or&nbsp;if&nbsp;your&nbsp;dump&nbsp;contains&nbsp;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"extended&nbsp;inserts&nbsp;or&nbsp;very&nbsp;long&nbsp;procedure&nbsp;definitions.&nbsp;Please&nbsp;read&nbsp;the&nbsp;&lt;a&nbsp;href=\"http://www.ozerov.de/bigdump/usage/\"&gt;BigDump&nbsp;usage&nbsp;notes&lt;/a&gt;&nbsp;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"for&nbsp;more&nbsp;infos.&nbsp;Ask&nbsp;for&nbsp;our&nbsp;support&nbsp;services&nbsp;"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"in&nbsp;order&nbsp;to&nbsp;handle&nbsp;dump&nbsp;files&nbsp;containing&nbsp;extended&nbsp;inserts.&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Execute&nbsp;query&nbsp;if&nbsp;end&nbsp;of&nbsp;query&nbsp;detected&nbsp;($delimiter&nbsp;as&nbsp;last&nbsp;character)&nbsp;AND&nbsp;NOT&nbsp;in&nbsp;parents<br><br>//&nbsp;DIAGNOSTIC<br>//&nbsp;echo&nbsp;("&lt;p&gt;Regex:&nbsp;".'/'.preg_quote($delimiter).'$/'."&lt;/p&gt;\n");<br>//&nbsp;echo&nbsp;("&lt;p&gt;In&nbsp;Parents:&nbsp;".($inparents?"true":"false")."&lt;/p&gt;\n");<br>//&nbsp;echo&nbsp;("&lt;p&gt;Line:&nbsp;$dumpline&lt;/p&gt;\n");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/'</span><span style="color: #007700">.</span><span style="color: #0000BB">preg_quote</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">).</span><span style="color: #DD0000">'$/'</span><span style="color: #007700">,</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">))&nbsp;&amp;&amp;&nbsp;!</span><span style="color: #0000BB">$inparents</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br><br></span><span style="color: #FF8000">//&nbsp;Cut&nbsp;off&nbsp;delimiter&nbsp;of&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;query<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">),</span><span style="color: #0000BB">0</span><span style="color: #007700">,-</span><span style="color: #0000BB">1</span><span style="color: #007700">*</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">//&nbsp;DIAGNOSTIC<br>//&nbsp;echo&nbsp;("&lt;p&gt;Query:&nbsp;".trim(nl2br(htmlentities($query)))."&lt;/p&gt;\n");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">TESTMODE&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Error&nbsp;at&nbsp;the&nbsp;line&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">:&nbsp;"</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$dumpline</span><span style="color: #007700">).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;Query:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">nl2br</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">))).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&gt;MySQL:&nbsp;"</span><span style="color: #007700">.((</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">]))&nbsp;?&nbsp;</span><span style="color: #0000BB">mysqli_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"___mysqli_ston"</span><span style="color: #007700">])&nbsp;:&nbsp;((</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;?&nbsp;</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)).</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries</span><span style="color: #007700">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">=</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$querylines</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Get&nbsp;the&nbsp;current&nbsp;file&nbsp;position<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$foffset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftell</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$foffset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gztell</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;UNEXPECTED:&nbsp;Can't&nbsp;read&nbsp;the&nbsp;file&nbsp;pointer&nbsp;offset&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br></span><span style="color: #FF8000">//&nbsp;Print&nbsp;statistics<br><br></span><span style="color: #0000BB">skin_open</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;echo&nbsp;("&lt;p&nbsp;class=\"centr\"&gt;&lt;b&gt;Statistics&lt;/b&gt;&lt;/p&gt;\n");<br><br>&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_this&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">-</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_done&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_togo&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_tota&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_this&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$queries</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_done&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_this&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">-</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"foffset"</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_done&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_this&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes_this</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_done&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes_done</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_this&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$kbytes_this</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_done&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$kbytes_done</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_togo&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$filesize</span><span style="color: #007700">-</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_tota&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$filesize</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes_togo</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes_tota</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$kbytes_togo</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$kbytes_tota</span><span style="color: #007700">/</span><span style="color: #0000BB">1024</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_this&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ceil</span><span style="color: #007700">(</span><span style="color: #0000BB">$bytes_this</span><span style="color: #007700">/</span><span style="color: #0000BB">$filesize</span><span style="color: #007700">*</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_done&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ceil</span><span style="color: #007700">(</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">/</span><span style="color: #0000BB">$filesize</span><span style="color: #007700">*</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_togo&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">100&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$pct_done</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_tota&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$bytes_togo</span><span style="color: #007700">==</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</span><span style="color: #0000BB">$lines_togo&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_tota&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'0'</span><span style="color: #007700">;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_bar&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&lt;div&nbsp;style=\"height:15px;width:</span><span style="color: #0000BB">$pct_done</span><span style="color: #DD0000">%;background-color:#000080;margin:0px;\"&gt;&lt;/div&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_togo&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_tota&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_togo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_tota&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_this&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_done&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_togo&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;?&nbsp;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_tota&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_bar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,</span><span style="color: #DD0000">'&amp;nbsp;'</span><span style="color: #007700">,</span><span style="color: #DD0000">'&lt;tt&gt;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;available&nbsp;for&nbsp;gzipped&nbsp;files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]&lt;/tt&gt;'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;center&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;width=\"520\"&nbsp;border=\"0\"&nbsp;cellpadding=\"3\"&nbsp;cellspacing=\"1\"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;&nbsp;&lt;/th&gt;&lt;th&nbsp;class=\"bg4\"&gt;Session&lt;/th&gt;&lt;th&nbsp;class=\"bg4\"&gt;Done&lt;/th&gt;&lt;th&nbsp;class=\"bg4\"&gt;To&nbsp;go&lt;/th&gt;&lt;th&nbsp;class=\"bg4\"&gt;Total&lt;/th&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;Lines&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$lines_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$lines_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$lines_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$lines_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;Queries&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$queries_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$queries_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$queries_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$queries_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;Bytes&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$bytes_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$bytes_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$bytes_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$bytes_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;KB&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$kbytes_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$kbytes_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$kbytes_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$kbytes_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;MB&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$mbytes_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$mbytes_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$mbytes_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$mbytes_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;%&lt;/th&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$pct_this</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$pct_done</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$pct_togo</span><span style="color: #DD0000">&lt;/td&gt;&lt;td&nbsp;class=\"bg3\"&gt;</span><span style="color: #0000BB">$pct_tota</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;&lt;th&nbsp;class=\"bg4\"&gt;%&nbsp;bar&lt;/th&gt;&lt;td&nbsp;class=\"bgpctbar\"&nbsp;colspan=\"4\"&gt;</span><span style="color: #0000BB">$pct_bar</span><span style="color: #DD0000">&lt;/td&gt;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/center&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;\n"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Finish&nbsp;message&nbsp;and&nbsp;restart&nbsp;the&nbsp;script<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">"start"</span><span style="color: #007700">]+</span><span style="color: #0000BB">$linespersession</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"successcentr\"&gt;Congratulations:&nbsp;End&nbsp;of&nbsp;file&nbsp;reached,&nbsp;assuming&nbsp;OK&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"successcentr\"&gt;IMPORTANT:&nbsp;REMOVE&nbsp;YOUR&nbsp;DUMP&nbsp;FILE&nbsp;and&nbsp;BIGDUMP&nbsp;SCRIPT&nbsp;FROM&nbsp;SERVER&nbsp;NOW!&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;This&nbsp;is&nbsp;a&nbsp;semi-error&nbsp;telling&nbsp;the&nbsp;script&nbsp;is&nbsp;finished<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;if&nbsp;(</span><span style="color: #0000BB">$delaypersession</span><span style="color: #007700">!=</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;Now&nbsp;I'm&nbsp;&lt;b&gt;waiting&nbsp;</span><span style="color: #0000BB">$delaypersession</span><span style="color: #DD0000">&nbsp;milliseconds&lt;/b&gt;&nbsp;before&nbsp;starting&nbsp;next&nbsp;session...&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$ajax</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;script&nbsp;language=\"JavaScript\"&nbsp;type=\"text/javascript\"&gt;window.setTimeout('location.href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"?start=</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">&amp;fn="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;foffset=</span><span style="color: #0000BB">$foffset</span><span style="color: #DD0000">&amp;totalqueries=</span><span style="color: #0000BB">$totalqueries</span><span style="color: #DD0000">&amp;delimiter="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">).</span><span style="color: #DD0000">"\";',500+</span><span style="color: #0000BB">$delaypersession</span><span style="color: #DD0000">);&lt;/script&gt;\n"</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;noscript&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"?start=</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">&amp;amp;fn="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;amp;foffset=</span><span style="color: #0000BB">$foffset</span><span style="color: #DD0000">&amp;amp;totalqueries=</span><span style="color: #0000BB">$totalqueries</span><span style="color: #DD0000">&amp;amp;delimiter="</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">).</span><span style="color: #DD0000">"\"&gt;Continue&nbsp;from&nbsp;the&nbsp;line&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">&lt;/a&gt;&nbsp;(Enable&nbsp;JavaScript&nbsp;to&nbsp;do&nbsp;it&nbsp;automatically)&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;/noscript&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;Press&nbsp;&lt;b&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"\"&gt;STOP&lt;/a&gt;&lt;/b&gt;&nbsp;to&nbsp;abort&nbsp;the&nbsp;import&nbsp;&lt;b&gt;OR&nbsp;WAIT!&lt;/b&gt;&lt;/p&gt;\n"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"error\"&gt;Stopped&nbsp;on&nbsp;error&lt;/p&gt;\n"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">skin_close</span><span style="color: #007700">();<br><br>}<br><br>if&nbsp;(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)<br>&nbsp;&nbsp;echo&nbsp;(</span><span style="color: #DD0000">"&lt;p&nbsp;class=\"centr\"&gt;&lt;a&nbsp;href=\""</span><span style="color: #007700">.</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"PHP_SELF"</span><span style="color: #007700">].</span><span style="color: #DD0000">"\"&gt;Start&nbsp;from&nbsp;the&nbsp;beginning&lt;/a&gt;&nbsp;(DROP&nbsp;the&nbsp;old&nbsp;tables&nbsp;before&nbsp;restarting)&lt;/p&gt;\n"</span><span style="color: #007700">);<br><br>if&nbsp;(</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">)&nbsp;((</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$___mysqli_res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbconnection</span><span style="color: #007700">)))&nbsp;?&nbsp;</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$___mysqli_res</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$file&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;!</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br>else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$file&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$gzipmode</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">gzclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;<br></span><br><br>&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br><br>&lt;/center&gt;<br><br>&lt;/body&gt;<br>&lt;/html&gt;<br><br><span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;If&nbsp;error&nbsp;or&nbsp;finished&nbsp;put&nbsp;out&nbsp;the&nbsp;whole&nbsp;output&nbsp;from&nbsp;above&nbsp;and&nbsp;stop<br><br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)&nbsp;<br>{<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$out1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ob_get_contents</span><span style="color: #007700">();<br>&nbsp;&nbsp;</span><span style="color: #0000BB">ob_end_clean</span><span style="color: #007700">();<br>&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$out1</span><span style="color: #007700">;<br>&nbsp;&nbsp;die;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;If&nbsp;Ajax&nbsp;enabled&nbsp;and&nbsp;in&nbsp;import&nbsp;progress&nbsp;creates&nbsp;responses&nbsp;&nbsp;(XML&nbsp;response&nbsp;or&nbsp;script&nbsp;for&nbsp;the&nbsp;initial&nbsp;page)<br><br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$ajax&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'start'</span><span style="color: #007700">]))<br>{<br>&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'ajaxrequest'</span><span style="color: #007700">]))&nbsp;<br>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ob_end_clean</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">create_xml_response</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;die;<br>&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;else&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">create_ajax_script</span><span style="color: #007700">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Anyway&nbsp;put&nbsp;out&nbsp;the&nbsp;output&nbsp;from&nbsp;above<br><br></span><span style="color: #0000BB">ob_flush</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;THE&nbsp;MAIN&nbsp;SCRIPT&nbsp;ENDS&nbsp;HERE<br><br><br>//&nbsp;*******************************************************************************************<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AJAX&nbsp;utilities<br>//&nbsp;*******************************************************************************************<br><br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">create_xml_response</span><span style="color: #007700">()&nbsp;<br>{<br>&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lines_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lines_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lines_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lines_tota</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$queries_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$queries_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$queries_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$queries_tota</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bytes_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bytes_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bytes_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$bytes_tota</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$kbytes_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$kbytes_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$kbytes_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$kbytes_tota</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mbytes_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mbytes_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mbytes_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$mbytes_tota</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pct_this</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pct_done</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pct_togo</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pct_tota</span><span style="color: #007700">,</span><span style="color: #0000BB">$pct_bar</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type:&nbsp;application/xml'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Cache-Control:&nbsp;no-cache'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;?xml&nbsp;version="1.0"&nbsp;encoding="ISO-8859-1"?&gt;'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;root&gt;"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;data&nbsp;-&nbsp;for&nbsp;calculations<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;linenumber&gt;</span><span style="color: #0000BB">$linenumber</span><span style="color: #DD0000">&lt;/linenumber&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;foffset&gt;</span><span style="color: #0000BB">$foffset</span><span style="color: #DD0000">&lt;/foffset&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;fn&gt;</span><span style="color: #0000BB">$curfilename</span><span style="color: #DD0000">&lt;/fn&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;totalqueries&gt;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #DD0000">&lt;/totalqueries&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;delimiter&gt;</span><span style="color: #0000BB">$delimiter</span><span style="color: #DD0000">&lt;/delimiter&gt;"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;results&nbsp;-&nbsp;for&nbsp;page&nbsp;update<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;elem1&gt;</span><span style="color: #0000BB">$lines_this</span><span style="color: #DD0000">&lt;/elem1&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem2&gt;</span><span style="color: #0000BB">$lines_done</span><span style="color: #DD0000">&lt;/elem2&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem3&gt;</span><span style="color: #0000BB">$lines_togo</span><span style="color: #DD0000">&lt;/elem3&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem4&gt;</span><span style="color: #0000BB">$lines_tota</span><span style="color: #DD0000">&lt;/elem4&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem5&gt;</span><span style="color: #0000BB">$queries_this</span><span style="color: #DD0000">&lt;/elem5&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem6&gt;</span><span style="color: #0000BB">$queries_done</span><span style="color: #DD0000">&lt;/elem6&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem7&gt;</span><span style="color: #0000BB">$queries_togo</span><span style="color: #DD0000">&lt;/elem7&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem8&gt;</span><span style="color: #0000BB">$queries_tota</span><span style="color: #DD0000">&lt;/elem8&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem9&gt;</span><span style="color: #0000BB">$bytes_this</span><span style="color: #DD0000">&lt;/elem9&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem10&gt;</span><span style="color: #0000BB">$bytes_done</span><span style="color: #DD0000">&lt;/elem10&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem11&gt;</span><span style="color: #0000BB">$bytes_togo</span><span style="color: #DD0000">&lt;/elem11&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem12&gt;</span><span style="color: #0000BB">$bytes_tota</span><span style="color: #DD0000">&lt;/elem12&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem13&gt;</span><span style="color: #0000BB">$kbytes_this</span><span style="color: #DD0000">&lt;/elem13&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem14&gt;</span><span style="color: #0000BB">$kbytes_done</span><span style="color: #DD0000">&lt;/elem14&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem15&gt;</span><span style="color: #0000BB">$kbytes_togo</span><span style="color: #DD0000">&lt;/elem15&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem16&gt;</span><span style="color: #0000BB">$kbytes_tota</span><span style="color: #DD0000">&lt;/elem16&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem17&gt;</span><span style="color: #0000BB">$mbytes_this</span><span style="color: #DD0000">&lt;/elem17&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem18&gt;</span><span style="color: #0000BB">$mbytes_done</span><span style="color: #DD0000">&lt;/elem18&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem19&gt;</span><span style="color: #0000BB">$mbytes_togo</span><span style="color: #DD0000">&lt;/elem19&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem20&gt;</span><span style="color: #0000BB">$mbytes_tota</span><span style="color: #DD0000">&lt;/elem20&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem21&gt;</span><span style="color: #0000BB">$pct_this</span><span style="color: #DD0000">&lt;/elem21&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem22&gt;</span><span style="color: #0000BB">$pct_done</span><span style="color: #DD0000">&lt;/elem22&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem23&gt;</span><span style="color: #0000BB">$pct_togo</span><span style="color: #DD0000">&lt;/elem23&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem24&gt;</span><span style="color: #0000BB">$pct_tota</span><span style="color: #DD0000">&lt;/elem24&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;elem_bar&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$pct_bar</span><span style="color: #007700">).</span><span style="color: #DD0000">"&lt;/elem_bar&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/root&gt;"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>}<br><br><br>function&nbsp;</span><span style="color: #0000BB">create_ajax_script</span><span style="color: #007700">()&nbsp;<br>{<br>&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$delaypersession</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;<br></span><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type="text/javascript"&nbsp;language="javascript"&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;creates&nbsp;next&nbsp;action&nbsp;url&nbsp;(upload&nbsp;page,&nbsp;or&nbsp;XML&nbsp;response)<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;get_url(linenumber,fn,foffset,totalqueries,delimiter)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]&nbsp;</span><span style="color: #0000BB">?&gt;</span>?start="+linenumber+"&amp;fn="+fn+"&amp;foffset="+foffset+"&amp;totalqueries="+totalqueries+"&amp;delimiter="+delimiter+"&amp;ajaxrequest=true";<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extracts&nbsp;text&nbsp;from&nbsp;XML&nbsp;element&nbsp;(itemname&nbsp;must&nbsp;be&nbsp;unique)<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;get_xml_data(itemname,xmld)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;xmld.getElementsByTagName(itemname).item(0).firstChild.data;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;makeRequest(url)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request&nbsp;=&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(window.XMLHttpRequest)&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mozilla&nbsp;etc.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request&nbsp;=&nbsp;new&nbsp;XMLHttpRequest();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(http_request.overrideMimeType)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request.overrideMimeType("text/xml");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(window.ActiveXObject)&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;IE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request&nbsp;=&nbsp;new&nbsp;ActiveXObject("Msxml2.XMLHTTP");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch(e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request&nbsp;=&nbsp;new&nbsp;ActiveXObject("Microsoft.XMLHTTP");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch(e)&nbsp;{}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!http_request)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("Cannot&nbsp;create&nbsp;an&nbsp;XMLHTTP&nbsp;instance");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request.onreadystatechange&nbsp;=&nbsp;server_response;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request.open("GET",&nbsp;url,&nbsp;true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_request.send(null);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;server_response()&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;waiting&nbsp;for&nbsp;correct&nbsp;response<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(http_request.readyState&nbsp;!=&nbsp;4)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(http_request.status&nbsp;!=&nbsp;200)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert("Page&nbsp;unavailable,&nbsp;or&nbsp;wrong&nbsp;url!")<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;r&nbsp;=&nbsp;xml&nbsp;response<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;r&nbsp;=&nbsp;http_request.responseXML;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//if&nbsp;received&nbsp;not&nbsp;XML&nbsp;but&nbsp;HTML&nbsp;with&nbsp;new&nbsp;page&nbsp;to&nbsp;show<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!r&nbsp;||&nbsp;r.getElementsByTagName('root').length&nbsp;==&nbsp;0)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;text&nbsp;=&nbsp;http_request.responseText;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.open();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.write(text);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.close();&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;update&nbsp;"Starting&nbsp;from&nbsp;line:&nbsp;"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementsByTagName('p').item(1).innerHTML&nbsp;=&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Starting&nbsp;from&nbsp;line:&nbsp;"&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.getElementsByTagName('linenumber').item(0).firstChild.nodeValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;update&nbsp;table&nbsp;with&nbsp;new&nbsp;values<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&lt;=&nbsp;24;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementsByTagName('td').item(i).firstChild.data&nbsp;=&nbsp;get_xml_data('elem'+i,r);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;update&nbsp;color&nbsp;bar<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementsByTagName('td').item(25).innerHTML&nbsp;=&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.getElementsByTagName('elem_bar').item(0).firstChild.nodeValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;action&nbsp;url&nbsp;(XML&nbsp;response)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url_request&nbsp;=&nbsp;&nbsp;get_url(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_xml_data('linenumber',r),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_xml_data('fn',r),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_xml_data('foffset',r),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_xml_data('totalqueries',r),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_xml_data('delimiter',r));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ask&nbsp;for&nbsp;XML&nbsp;response&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.setTimeout("makeRequest(url_request)",500+<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$delaypersession</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">?&gt;</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First&nbsp;Ajax&nbsp;request&nbsp;from&nbsp;initial&nbsp;page<br><br>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;http_request&nbsp;=&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;url_request&nbsp;=&nbsp;&nbsp;get_url(<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;(</span><span style="color: #0000BB">$linenumber</span><span style="color: #007700">.</span><span style="color: #DD0000">',"'</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$curfilename</span><span style="color: #007700">).</span><span style="color: #DD0000">'",'</span><span style="color: #007700">.</span><span style="color: #0000BB">$foffset</span><span style="color: #007700">.</span><span style="color: #DD0000">','</span><span style="color: #007700">.</span><span style="color: #0000BB">$totalqueries</span><span style="color: #007700">.</span><span style="color: #DD0000">',"'</span><span style="color: #007700">.</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$delimiter</span><span style="color: #007700">).</span><span style="color: #DD0000">'"'</span><span style="color: #007700">)&nbsp;;</span><span style="color: #0000BB">?&gt;</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;window.setTimeout("makeRequest(url_request)",500+<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$delaypersession</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">?&gt;</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br><br><span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">}<br><br></span><span style="color: #0000BB">?&gt;<br></span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
<div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;ecef99394856902d456b04622118c793_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/mailer_profile.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="ecef99394856902d456b04622118c793_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">1753</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br></span><span style="color: #FF8000">/**/
<br>//Definir&nbsp;que&nbsp;vamos&nbsp;a&nbsp;usar&nbsp;SMTP
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">IsSMTP</span><span style="color: #007700">();
<br></span><span style="color: #FF8000">//Esto&nbsp;es&nbsp;para&nbsp;activar&nbsp;el&nbsp;modo&nbsp;depuración.&nbsp;En&nbsp;entorno&nbsp;de&nbsp;pruebas&nbsp;lo&nbsp;mejor&nbsp;es&nbsp;2,&nbsp;en&nbsp;producción&nbsp;siempre&nbsp;0
<br>//&nbsp;0&nbsp;=&nbsp;off&nbsp;(producción)
<br>//&nbsp;1&nbsp;=&nbsp;client&nbsp;messages
<br>//&nbsp;2&nbsp;=&nbsp;client&nbsp;and&nbsp;server&nbsp;messages
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SMTPDebug&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Ahora&nbsp;definimos&nbsp;gmail&nbsp;como&nbsp;servidor&nbsp;que&nbsp;aloja&nbsp;nuestro&nbsp;SMTP
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'smtp.gmail.com'</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//El&nbsp;puerto&nbsp;será&nbsp;el&nbsp;587&nbsp;ya&nbsp;que&nbsp;usamos&nbsp;encriptación&nbsp;TLS
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">587</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Definmos&nbsp;la&nbsp;seguridad&nbsp;como&nbsp;TLS
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SMTPSecure&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'tls'</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Tenemos&nbsp;que&nbsp;usar&nbsp;gmail&nbsp;autenticados,&nbsp;así&nbsp;que&nbsp;esto&nbsp;a&nbsp;TRUE
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SMTPAuth&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Definimos&nbsp;la&nbsp;cuenta&nbsp;que&nbsp;vamos&nbsp;a&nbsp;usar.&nbsp;Dirección&nbsp;completa&nbsp;de&nbsp;la&nbsp;misma
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Username&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"alexinfopruna@gmail.com"</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Introducimos&nbsp;nuestra&nbsp;contraseña&nbsp;de&nbsp;gmail
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Password&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Madelaine:14"</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Definimos&nbsp;el&nbsp;remitente&nbsp;(dirección&nbsp;y,&nbsp;opcionalmente,&nbsp;nombre)
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFrom</span><span style="color: #007700">(</span><span style="color: #DD0000">'info@can-borrell.com'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Reserves&nbsp;Can&nbsp;Borrell'</span><span style="color: #007700">);
<br></span><span style="color: #FF8000">//Esta&nbsp;línea&nbsp;es&nbsp;por&nbsp;si&nbsp;queréis&nbsp;enviar&nbsp;copia&nbsp;a&nbsp;alguien&nbsp;(dirección&nbsp;y,&nbsp;opcionalmente,&nbsp;nombre)
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">AddReplyTo</span><span style="color: #007700">(</span><span style="color: #DD0000">'replyto@correoquesea.com'</span><span style="color: #007700">,</span><span style="color: #DD0000">'El&nbsp;de&nbsp;la&nbsp;réplica'</span><span style="color: #007700">);
<br></span><span style="color: #FF8000">//Y,&nbsp;ahora&nbsp;sí,&nbsp;definimos&nbsp;el&nbsp;destinatario&nbsp;(dirección&nbsp;y,&nbsp;opcionalmente,&nbsp;nombre)
<br>//$mail-&gt;AddAddress($addr);
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">AddAddress</span><span style="color: #007700">(</span><span style="color: #DD0000">"alex@infopruna.net"</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//EL&nbsp;CLIENT&nbsp;
<br>//Definimos&nbsp;el&nbsp;tema&nbsp;del&nbsp;email
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Para&nbsp;enviar&nbsp;un&nbsp;correo&nbsp;formateado&nbsp;en&nbsp;HTML&nbsp;lo&nbsp;cargamos&nbsp;con&nbsp;la&nbsp;siguiente&nbsp;función.&nbsp;Si&nbsp;no,&nbsp;puedes&nbsp;meterle&nbsp;directamente&nbsp;una&nbsp;cadena&nbsp;de&nbsp;texto.
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Body&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//Y&nbsp;por&nbsp;si&nbsp;nos&nbsp;bloquean&nbsp;el&nbsp;contenido&nbsp;HTML&nbsp;(algunos&nbsp;correos&nbsp;lo&nbsp;hacen&nbsp;por&nbsp;seguridad)&nbsp;una&nbsp;versión&nbsp;alternativa&nbsp;en&nbsp;texto&nbsp;plano&nbsp;(también&nbsp;será&nbsp;válida&nbsp;para&nbsp;lectores&nbsp;de&nbsp;pantalla)
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">AltBody&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$altbody</span><span style="color: #007700">;
<br></span><span style="color: #FF8000">//&nbsp;HTML
<br></span><span style="color: #0000BB">$mail</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">IsHTML</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);
<br>
<br>
<br>
<br></span><span style="color: #FF8000">//$test=true;
<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
<div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;ce7b475971365f33bc03ac15ccd2c352_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/llista_dies.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="ce7b475971365f33bc03ac15ccd2c352_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">1870</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">llegir_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]=&nbsp;array();
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gestor&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">)&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">))&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bufer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4096</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #0000BB">$bufer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"-/"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"-/"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"\n\t\r"</span><span style="color: #007700">);
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">checkdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">,</span><span style="color: #0000BB">$y</span><span style="color: #007700">))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">array_push</span><span style="color: #007700">(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$m</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$d</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;else
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>}&nbsp;&nbsp;
<br>
<br>function&nbsp;</span><span style="color: #0000BB">guarda_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">,</span><span style="color: #0000BB">$any</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gestor&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$d</span><span style="color: #007700">==</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">])&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">=</span><span style="color: #0000BB">$i</span><span style="color: #007700">+</span><span style="color: #0000BB">1</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">=</span><span style="color: #0000BB">$any</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dat</span><span style="color: #007700">=</span><span style="color: #0000BB">$d</span><span style="color: #007700">.</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$m</span><span style="color: #007700">.</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$y</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$d</span><span style="color: #007700">!=</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">fputs</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">,</span><span style="color: #0000BB">$dat</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
<br>}&nbsp;&nbsp;
<br>function&nbsp;</span><span style="color: #0000BB">diaBloquejat</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,</span><span style="color: #0000BB">$data</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dia</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mes</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">=</span><span style="color: #0000BB">llegir_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">);&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$mes</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dia</span><span style="color: #007700">==</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$mes</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">])&nbsp;return&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;
<br>}
<br>
<br>function&nbsp;</span><span style="color: #0000BB">crea_llista_js</span><span style="color: #007700">(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"var&nbsp;SPECIAL_DAYS&nbsp;=&nbsp;{"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$coma</span><span style="color: #007700">=</span><span style="color: #DD0000">",\n"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</span><span style="color: #0000BB">$coma</span><span style="color: #007700">=</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">.</span><span style="color: #DD0000">"&nbsp;:&nbsp;["</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$q</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">!=</span><span style="color: #0000BB">$ii&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">!=</span><span style="color: #0000BB">$dd&nbsp;</span><span style="color: #007700">)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$q</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)echo&nbsp;</span><span style="color: #DD0000">","</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ii</span><span style="color: #007700">=</span><span style="color: #0000BB">$i</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dd</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"]"</span><span style="color: #007700">.</span><span style="color: #0000BB">$coma</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"};"</span><span style="color: #007700">;
<br>}&nbsp;
<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
<div class="conversion">
        <table class="conversionheadline">
    <tbody><tr>
        <td><span class="conversionok" onclick="toggle_view(&quot;5181f0c69659482c90ecbad7dac88ce2_summary&quot;)">+</span></td>
        <td align="right">
            <span class="conversionok">OK: </span>                      
        </td>
        <td width="99%">
            <span class="conversionok">../../../canBorrell_inc_LOCAL/llista_dies_taules.php</span>
        </td>
    </tr>
    </tbody></table>
    <div class="conversiondetails" id="5181f0c69659482c90ecbad7dac88ce2_summary">
    <h3>Summary</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">
    <tbody><tr>
        <th align="right">Found&nbsp;equals&nbsp;Converted?</th>
        <th align="right">Found</th>
        <th align="right">Converted</th>        
        <th align="right">Warnings/Errors</th>
        <th align="right">File&nbsp;update</th>
        <th align="right">File&nbsp;backup</th>        
        <th align="right" width="99%">Length</th>
    </tr>
    <tr>
        <td align="right">Yes</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">0</td>
        <td align="right">No</td>
        <td align="right">No</td>        
        <td align="right">2522</td>
    </tr>    
    </tbody></table>   
        <h3 style="margin-left:1em">Generated Code</h3>
    <table cellpadding="0" cellspacing="0" class="conversiondetailstable">    
    <tbody><tr>
        <td style="padding:0.25em"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br></span><span style="color: #FF8000">//&nbsp;TEST
<br>//$dies=llegir_dies("../can_borrell_inc/bloq.txt");&nbsp;&nbsp;
<br>//crea_llista_js($dies);
<br>
<br>
<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">llegir_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]=&nbsp;array();
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gestor&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">)&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">))&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bufer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4096</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$d=substr($bufer,0,2);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$m=(int)&nbsp;substr($bufer,3,2);&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$y=substr($bufer,6,4);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #0000BB">$bufer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"-/"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"-/"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">=</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">"\n\t\r"</span><span style="color: #007700">);
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">checkdate</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">,</span><span style="color: #0000BB">$d</span><span style="color: #007700">,</span><span style="color: #0000BB">$y</span><span style="color: #007700">))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">array_push</span><span style="color: #007700">(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$m</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$d</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//echo&nbsp;$m."&nbsp;DIA&nbsp;".$d;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print_r($dies);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;else
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>}&nbsp;&nbsp;
<br>
<br>function&nbsp;</span><span style="color: #0000BB">guarda_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">,</span><span style="color: #0000BB">$any</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$gestor&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//asort($dies[$i]);&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">=</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">=</span><span style="color: #0000BB">$i</span><span style="color: #007700">+</span><span style="color: #0000BB">1</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">=</span><span style="color: #0000BB">$any</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dat</span><span style="color: #007700">=</span><span style="color: #0000BB">$d</span><span style="color: #007700">.</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$m</span><span style="color: #007700">.</span><span style="color: #DD0000">"-"</span><span style="color: #007700">.</span><span style="color: #0000BB">$y</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br></span><span style="color: #FF8000">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ara=getdate();
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$ara=microtime();
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dd=mktime(0,&nbsp;0,&nbsp;0,&nbsp;$m,&nbsp;$d,&nbsp;$y);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($dd&lt;$ara[0])&nbsp;$d=0;
<br>&nbsp;*/
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$d</span><span style="color: #007700">!=</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">fputs</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">,</span><span style="color: #0000BB">$dat</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>
<br>}&nbsp;&nbsp;
<br>function&nbsp;</span><span style="color: #0000BB">diaBloquejat</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">,</span><span style="color: #0000BB">$data</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dia</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mes</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">=</span><span style="color: #0000BB">llegir_dies</span><span style="color: #007700">(</span><span style="color: #0000BB">$fitxer</span><span style="color: #007700">);&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$mes</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$dia</span><span style="color: #007700">==</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$mes</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">])&nbsp;return&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;
<br>}
<br>
<br>function&nbsp;</span><span style="color: #0000BB">crea_llista_js</span><span style="color: #007700">(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">,</span><span style="color: #0000BB">$var</span><span style="color: #007700">=</span><span style="color: #DD0000">"SPECIAL_DAYS"</span><span style="color: #007700">)
<br>{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//echo&nbsp;$m."&nbsp;DIA&nbsp;".$d;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print_r($dies);
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"var&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #DD0000">&nbsp;=&nbsp;{"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)
<br>&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">$coma</span><span style="color: #007700">=</span><span style="color: #DD0000">",\n"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</span><span style="color: #0000BB">$coma</span><span style="color: #007700">=</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">.</span><span style="color: #DD0000">"&nbsp;:&nbsp;["</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$q</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(isset(</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//echo&nbsp;"\n&nbsp;//******&nbsp;".$i."&nbsp;-&nbsp;".$dies[$i][$k]."&nbsp;--&gt;&nbsp;".((int)date("m")-1)."&nbsp;-&nbsp;".date("d")."\n";
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//if&nbsp;(&nbsp;&nbsp;(((int)date("m")-1)!=$i)&nbsp;&nbsp;||&nbsp;&nbsp;(($dies[$i][$k])!=((int)date("d"))))&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//if&nbsp;(true)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$k</span><span style="color: #007700">==</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">]!=</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">-</span><span style="color: #0000BB">1</span><span style="color: #007700">])&nbsp;</span><span style="color: #FF8000">//EVITA&nbsp;REPETITS
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">{&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$q</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)</span><span style="color: #0000BB">$js</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">","</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">.=&nbsp;</span><span style="color: #0000BB">$dies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">$k</span><span style="color: #007700">];
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">++;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"]"</span><span style="color: #007700">.</span><span style="color: #0000BB">$coma</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"};\n\n&nbsp;"</span><span style="color: #007700">;
<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$js</span><span style="color: #007700">;
<br>}&nbsp;
<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></td>
    </tr>
    </tbody></table>
    <br>&nbsp;
    </div>
</div>
</div>
<div class="bottom">
    <a href="http://cbdev-localhost/MySQLConverterTool/GUI/convert_directory.php#top">Top</a>
</div>

</body></html>